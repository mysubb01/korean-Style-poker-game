"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/game/[id]/page",{

/***/ "(app-pages-browser)/./src/lib/gameApi.ts":
/*!****************************!*\
  !*** ./src/lib/gameApi.ts ***!
  \****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGame: function() { return /* binding */ createGame; },\n/* harmony export */   getGameState: function() { return /* binding */ getGameState; },\n/* harmony export */   joinGame: function() { return /* binding */ joinGame; },\n/* harmony export */   placeBet: function() { return /* binding */ placeBet; },\n/* harmony export */   sendMessage: function() { return /* binding */ sendMessage; },\n/* harmony export */   startGame: function() { return /* binding */ startGame; },\n/* harmony export */   updateSeat: function() { return /* binding */ updateSeat; }\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(app-pages-browser)/./src/lib/supabase.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var _utils_gameLogic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/gameLogic */ \"(app-pages-browser)/./src/utils/gameLogic.ts\");\n\n\n\n// 상수 정의 (파일 상단에 추가)\nconst REGAME_WAIT_TIME_MS = 5000; // 재경기 대기 시간 (5초)\n/**\n * 새로운 게임 생성\n */ async function createGame(username) {\n    const gameId = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    const playerId = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    // 임시 사용자 ID 생성\n    const userId = \"user_\".concat(Math.random().toString(36).substring(2, 9));\n    try {\n        // 게임 생성\n        const { data: gameData, error: gameError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").insert({\n            id: gameId,\n            status: \"waiting\",\n            current_turn: null,\n            betting_value: 0,\n            winner: null\n        }).select();\n        if (gameError) {\n            console.error(\"게임 생성 오류 세부 정보:\", gameError);\n            throw new Error(\"게임을 생성할 수 없습니다: \" + gameError.message);\n        }\n        console.log(\"게임 생성 성공:\", gameId);\n        // 관찰자 모드로 시작하므로 플레이어를 생성하지 않음\n        // 클라이언트는 빈 자리를 클릭해 참여해야 함\n        return {\n            gameId,\n            playerId: null\n        };\n    } catch (err) {\n        console.error(\"게임 생성 중 예외 발생:\", err);\n        throw err;\n    }\n}\n/**\n * 기존 게임에 참가\n */ async function joinGame(gameId, username, seatIndex) {\n    try {\n        // 게임 상태 체크\n        const { data: gameData, error: gameError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").select(\"*\").eq(\"id\", gameId).single();\n        if (gameError || !gameData) {\n            console.error(\"게임 조회 오류 세부 정보:\", gameError);\n            throw new Error(\"게임을 찾을 수 없습니다: \" + ((gameError === null || gameError === void 0 ? void 0 : gameError.message) || \"알 수 없는 오류\"));\n        }\n        // 로컬 스토리지에서 사용자 ID와 플레이어 ID 확인\n        const storedUserId = localStorage.getItem(\"game_\".concat(gameId, \"_user_id\"));\n        const storedPlayerId = localStorage.getItem(\"game_\".concat(gameId, \"_player_id\"));\n        // 기존 참여자인지 확인\n        if (storedUserId && storedPlayerId) {\n            // 기존 플레이어 정보 조회\n            const { data: existingPlayer, error: existingPlayerError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").select(\"*\").eq(\"game_id\", gameId).eq(\"id\", storedPlayerId).single();\n            if (!existingPlayerError && existingPlayer) {\n                console.log(\"기존 플레이어로 재접속:\", existingPlayer.id);\n                // 이름 업데이트가 필요한 경우\n                if (existingPlayer.username !== username) {\n                    await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n                        username\n                    }).eq(\"id\", existingPlayer.id);\n                }\n                // 최신 게임 상태 가져오기\n                const gameState = await getGameState(gameId);\n                return {\n                    playerId: existingPlayer.id,\n                    gameState,\n                    rejoined: true\n                };\n            }\n        }\n        // 새 플레이어 참가 (게임이 대기 중일 때만)\n        if (gameData.status !== \"waiting\") {\n            throw new Error(\"이미 시작된 게임에는 참가할 수 없습니다.\");\n        }\n        const playerId = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        // 임시 사용자 ID 생성\n        const userId = \"user_\".concat(Math.random().toString(36).substring(2, 9));\n        // 플레이어 생성\n        const { data: playerData, error: playerError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").insert({\n            id: playerId,\n            game_id: gameId,\n            user_id: userId,\n            username,\n            balance: 10000,\n            is_die: false,\n            seat_index: seatIndex\n        }).select();\n        if (playerError) {\n            console.error(\"플레이어 생성 오류 세부 정보:\", playerError);\n            throw new Error(\"게임에 참가할 수 없습니다: \" + playerError.message);\n        }\n        console.log(\"플레이어 참가 성공:\", playerId);\n        // 로컬 스토리지에 사용자 정보 저장\n        localStorage.setItem(\"game_\".concat(gameId, \"_user_id\"), userId);\n        localStorage.setItem(\"game_\".concat(gameId, \"_player_id\"), playerId);\n        // 최신 게임 상태 가져오기\n        const gameState = await getGameState(gameId);\n        return {\n            playerId,\n            gameState\n        };\n    } catch (err) {\n        console.error(\"게임 참가 중 예외 발생:\", err);\n        throw err;\n    }\n}\n/**\n * 게임 상태 조회\n */ async function getGameState(gameId) {\n    // 게임 정보 가져오기\n    const { data: gameData, error: gameError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").select(\"*\").eq(\"id\", gameId).single();\n    if (gameError || !gameData) {\n        console.error(\"게임 조회 오류:\", gameError);\n        throw new Error(\"게임을 찾을 수 없습니다.\");\n    }\n    // 플레이어 정보 가져오기\n    const { data: playersData, error: playersError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").select(\"*\").eq(\"game_id\", gameId);\n    if (playersError) {\n        console.error(\"플레이어 조회 오류:\", playersError);\n        throw new Error(\"플레이어 정보를 불러올 수 없습니다.\");\n    }\n    // 재경기 남은 시간 계산\n    let regameRemainingTime = undefined;\n    if (gameData.status === \"regame\" && gameData.regame_start_time && gameData.regame_wait_time) {\n        const startTime = new Date(gameData.regame_start_time).getTime();\n        const currentTime = new Date().getTime();\n        const elapsedMs = currentTime - startTime;\n        const remainingMs = Math.max(0, gameData.regame_wait_time - elapsedMs);\n        regameRemainingTime = Math.ceil(remainingMs / 1000);\n    }\n    // 게임 상태 정보 포맷팅\n    const gameState = {\n        id: gameData.id,\n        status: gameData.status,\n        players: playersData.map((player)=>({\n                id: player.id,\n                user_id: player.user_id,\n                username: player.username,\n                balance: player.balance,\n                cards: player.cards || [],\n                isDie: player.is_die,\n                seat_index: player.seat_index\n            })),\n        currentTurn: gameData.current_turn || \"\",\n        winner: gameData.winner,\n        bettingValue: gameData.betting_value,\n        regame_remaining_time: regameRemainingTime,\n        regame_start_time: gameData.regame_start_time\n    };\n    return gameState;\n}\n/**\n * 게임 시작\n */ async function startGame(gameId) {\n    // 게임 및 플레이어 정보 가져오기\n    const { data: playersData, error: playersError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").select(\"id\").eq(\"game_id\", gameId);\n    if (playersError || !playersData || playersData.length < 2) {\n        throw new Error(\"최소 2명의 플레이어가 필요합니다.\");\n    }\n    // 카드 덱 생성 및 셔플\n    const deck = createShuffledDeck();\n    // 플레이어들에게 카드 배분 및 업데이트\n    for(let i = 0; i < playersData.length; i++){\n        const playerCards = [\n            deck.pop(),\n            deck.pop()\n        ].filter(Boolean);\n        const { error: updateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n            cards: playerCards\n        }).eq(\"id\", playersData[i].id);\n        if (updateError) {\n            console.error(\"플레이어 카드 업데이트 오류:\", updateError);\n            throw new Error(\"카드를 배분할 수 없습니다.\");\n        }\n    }\n    // 첫 턴을 랜덤으로 선택\n    const firstTurn = playersData[Math.floor(Math.random() * playersData.length)].id;\n    // 게임 상태 업데이트\n    const { error: updateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").update({\n        status: \"playing\",\n        current_turn: firstTurn,\n        betting_value: 0\n    }).eq(\"id\", gameId);\n    if (updateError) {\n        console.error(\"게임 상태 업데이트 오류:\", updateError);\n        throw new Error(\"게임을 시작할 수 없습니다.\");\n    }\n    // 게임 시작 액션 기록\n    await recordGameAction(gameId, \"start\", firstTurn);\n}\n/**\n * 베팅\n */ async function placeBet(gameId, playerId, actionType, amount) {\n    // 게임 상태 확인\n    const gameState = await getGameState(gameId);\n    if (gameState.status !== \"playing\") {\n        throw new Error(\"게임이 진행 중이 아닙니다.\");\n    }\n    if (gameState.currentTurn !== playerId) {\n        throw new Error(\"당신의 턴이 아닙니다.\");\n    }\n    const player = gameState.players.find((p)=>p.id === playerId);\n    if (!player) {\n        throw new Error(\"플레이어를 찾을 수 없습니다.\");\n    }\n    // 최근 배팅 액션 조회\n    const { data: actionsData, error: actionsError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"game_actions\").select(\"*\").eq(\"game_id\", gameId).order(\"created_at\", {\n        ascending: false\n    }).limit(10);\n    if (actionsError) {\n        console.error(\"게임 액션 조회 오류:\", actionsError);\n        throw new Error(\"게임 액션을 조회할 수 없습니다.\");\n    }\n    // 마지막 배팅 액션 찾기\n    const lastBetAction = actionsData === null || actionsData === void 0 ? void 0 : actionsData.find((action)=>[\n            \"bet\",\n            \"raise\",\n            \"call\",\n            \"half\"\n        ].includes(action.action_type) && action.player_id !== playerId);\n    // 액션 별 배팅 금액 계산\n    let betAmount = 0;\n    const baseBet = gameState.baseBet || 500; // 기본 배팅액\n    switch(actionType){\n        case \"check\":\n            // 이전 베팅이 없을 때만 가능\n            if (lastBetAction && lastBetAction.amount > 0) {\n                throw new Error(\"이전 베팅이 있어 체크할 수 없습니다.\");\n            }\n            betAmount = 0;\n            break;\n        case \"call\":\n            // 이전 베팅액과 동일하게\n            betAmount = (lastBetAction === null || lastBetAction === void 0 ? void 0 : lastBetAction.amount) || baseBet;\n            break;\n        case \"half\":\n            // 팟의 절반\n            betAmount = Math.floor(gameState.bettingValue / 2);\n            // 최소 기본 배팅액 보장\n            betAmount = betAmount < baseBet ? baseBet : betAmount;\n            break;\n        case \"bet\":\n        case \"raise\":\n            // 사용자가 지정한 금액\n            if (!amount || amount <= 0) {\n                throw new Error(\"베팅 금액은 0보다 커야 합니다.\");\n            }\n            // 최소 베팅액 확인\n            const minBet = lastBetAction ? lastBetAction.amount * 2 : baseBet;\n            if (amount < minBet) {\n                throw new Error(\"최소 베팅액은 \".concat(minBet, \"입니다.\"));\n            }\n            // 최대 베팅액 (올인 이외)은 보유량\n            betAmount = amount;\n            break;\n        case \"die\":\n            // 다이는 비용 없음\n            betAmount = 0;\n            break;\n        default:\n            throw new Error(\"잘못된 액션 타입입니다.\");\n    }\n    // 잔액 확인\n    if (actionType !== \"die\" && player.balance < betAmount) {\n        throw new Error(\"잔액이 부족합니다.\");\n    }\n    // 액션 처리\n    if (actionType === \"die\") {\n        // 플레이어를 다이 상태로 변경\n        const { error: playerUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n            is_die: true\n        }).eq(\"id\", playerId);\n        if (playerUpdateError) {\n            console.error(\"플레이어 다이 상태 업데이트 오류:\", playerUpdateError);\n            throw new Error(\"다이할 수 없습니다.\");\n        }\n        // 남은 플레이어 확인\n        const activePlayers = gameState.players.filter((p)=>p.id !== playerId && !p.isDie);\n        if (activePlayers.length === 1) {\n            // 한 명만 남았으면 게임 종료\n            const winner = activePlayers[0].id;\n            // 승자의 잔액 업데이트\n            const { error: winnerUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n                balance: activePlayers[0].balance + gameState.bettingValue\n            }).eq(\"id\", winner);\n            if (winnerUpdateError) {\n                console.error(\"승자 잔액 업데이트 오류:\", winnerUpdateError);\n                throw new Error(\"승자 잔액을 업데이트할 수 없습니다.\");\n            }\n            // 게임 종료 상태 업데이트\n            const { error: gameUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").update({\n                status: \"finished\",\n                winner: winner\n            }).eq(\"id\", gameId);\n            if (gameUpdateError) {\n                console.error(\"게임 종료 상태 업데이트 오류:\", gameUpdateError);\n                throw new Error(\"게임을 종료할 수 없습니다.\");\n            }\n            // 액션 기록\n            await recordGameAction(gameId, \"die\", playerId);\n            return;\n        } else {\n            // 다음 플레이어 결정\n            const nextPlayerTurnId = getNextPlayerTurn(gameState.players, playerId);\n            // 게임 상태 업데이트\n            const { error: gameUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").update({\n                current_turn: nextPlayerTurnId\n            }).eq(\"id\", gameId);\n            if (gameUpdateError) {\n                console.error(\"게임 상태 업데이트 오류:\", gameUpdateError);\n                throw new Error(\"게임 상태를 업데이트할 수 없습니다.\");\n            }\n            // 액션 기록\n            await recordGameAction(gameId, \"die\", playerId);\n            return;\n        }\n    }\n    // 다음 플레이어 결정\n    const nextPlayerTurnId = getNextPlayerTurn(gameState.players, playerId);\n    // 게임 상태 업데이트\n    const { error: gameUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").update({\n        current_turn: nextPlayerTurnId,\n        betting_value: gameState.bettingValue + betAmount\n    }).eq(\"id\", gameId);\n    if (gameUpdateError) {\n        console.error(\"게임 상태 업데이트 오류:\", gameUpdateError);\n        throw new Error(\"베팅할 수 없습니다.\");\n    }\n    // 플레이어 잔액 업데이트\n    if (betAmount > 0) {\n        const { error: playerUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n            balance: player.balance - betAmount\n        }).eq(\"id\", playerId);\n        if (playerUpdateError) {\n            console.error(\"플레이어 잔액 업데이트 오류:\", playerUpdateError);\n            throw new Error(\"잔액을 업데이트할 수 없습니다.\");\n        }\n    }\n    // 모든 플레이어가 액션을 취했는지 확인\n    const allPlayersTookAction = await checkAllPlayersHadTurn(gameId, gameState.players);\n    const allPlayersMatchedBet = await checkAllPlayersMatchedBet(gameId, gameState.players);\n    // 모든 플레이어가 액션을 취했고, 배팅 금액이 일치하면 게임 종료\n    if (allPlayersTookAction && allPlayersMatchedBet) {\n        console.log(\"모든 플레이어 액션 완료, 베팅 금액 일치 - 게임 종료\");\n        await finishGame(gameId);\n    } else {\n        // 디버그 로그\n        if (!allPlayersTookAction) {\n            console.log(\"아직 모든 플레이어가 액션을 취하지 않음\");\n        }\n        if (!allPlayersMatchedBet) {\n            console.log(\"플레이어들의 베팅 금액이 일치하지 않음\");\n        }\n    }\n    // 액션 기록\n    await recordGameAction(gameId, actionType, playerId, betAmount);\n}\n// 모든 플레이어가 동일한 금액을 배팅했는지 확인\nasync function checkAllPlayersMatchedBet(gameId, players) {\n    const activePlayers = players.filter((p)=>!p.isDie);\n    if (activePlayers.length <= 1) {\n        return true;\n    }\n    // 게임 시작 이후 각 플레이어별 마지막 베팅 가져오기\n    const playerLastBets = {};\n    for (const player of activePlayers){\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"game_actions\").select(\"*\").eq(\"game_id\", gameId).eq(\"player_id\", player.id).in(\"action_type\", [\n            \"bet\",\n            \"call\",\n            \"raise\",\n            \"half\",\n            \"check\"\n        ]).order(\"created_at\", {\n            ascending: false\n        }).limit(1);\n        if (error || !data || data.length === 0) {\n            return false; // 데이터가 없으면 아직 일치하지 않음\n        }\n        playerLastBets[player.id] = data[0].amount || 0;\n    }\n    // 베팅액이 모두 같은지 확인\n    const betAmounts = Object.values(playerLastBets);\n    return betAmounts.every((amount)=>amount === betAmounts[0]);\n}\n// 다음 플레이어 턴 가져오기\nfunction getNextPlayerTurn(players, currentPlayerId) {\n    const activePlayers = players.filter((p)=>!p.isDie);\n    if (activePlayers.length <= 1) {\n        return \"\";\n    }\n    const currentIndex = activePlayers.findIndex((p)=>p.id === currentPlayerId);\n    const nextIndex = (currentIndex + 1) % activePlayers.length;\n    return activePlayers[nextIndex].id;\n}\n/**\n * 메시지 전송\n */ async function sendMessage(gameId, playerId, content) {\n    if (!content.trim()) {\n        throw new Error(\"메시지 내용이 비어있습니다.\");\n    }\n    // 플레이어 정보 가져오기\n    const { data: playerData, error: playerError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").select(\"username, user_id\").eq(\"id\", playerId).single();\n    if (playerError || !playerData) {\n        console.error(\"플레이어 정보 조회 오류:\", playerError);\n        throw new Error(\"플레이어 정보를 찾을 수 없습니다.\");\n    }\n    // 메시지 ID 생성\n    const messageId = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n    const timestamp = new Date().toISOString();\n    // 메시지 객체 생성\n    const messageData = {\n        id: messageId,\n        game_id: gameId,\n        user_id: playerData.user_id,\n        username: playerData.username,\n        content: content,\n        created_at: timestamp\n    };\n    // 메시지 저장\n    const { error: messageError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"messages\").insert(messageData);\n    if (messageError) {\n        console.error(\"메시지 저장 오류:\", messageError);\n        throw new Error(\"메시지를 전송할 수 없습니다: \" + messageError.message);\n    }\n}\n/**\n * 게임 액션 기록\n */ async function recordGameAction(gameId, actionType, playerId, amount) {\n    const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"game_actions\").insert({\n        game_id: gameId,\n        player_id: playerId,\n        action_type: actionType,\n        amount: amount\n    });\n    if (error) {\n        console.error(\"게임 액션 기록 오류:\", error);\n        // 액션 기록 실패는 게임 진행에 치명적이지 않으므로 오류를 던지지 않음\n        console.warn(\"게임 액션을 기록할 수 없습니다.\");\n    }\n}\n/**\n * 셔플된 카드 덱 생성\n */ function createShuffledDeck() {\n    // 1부터 20까지의 카드 생성 (섯다 카드)\n    const deck = Array.from({\n        length: 20\n    }, (_, i)=>i + 1);\n    // 덱 셔플 (Fisher-Yates 알고리즘)\n    for(let i = deck.length - 1; i > 0; i--){\n        const j = Math.floor(Math.random() * (i + 1));\n        [deck[i], deck[j]] = [\n            deck[j],\n            deck[i]\n        ];\n    }\n    return deck;\n}\n/**\n * 모든 플레이어가 턴을 가졌는지 확인\n */ async function checkAllPlayersHadTurn(gameId, players) {\n    const activePlayers = players.filter((p)=>!p.isDie);\n    // 게임 시작 이후 각 플레이어별 가장 최근 액션 확인\n    const playerLastActions = new Set();\n    // 게임의 마지막 라운드 시작 시간 찾기 (start 액션 또는 가장 오래된 베팅 액션)\n    const { data: startAction, error: startError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"game_actions\").select(\"created_at\").eq(\"game_id\", gameId).eq(\"action_type\", \"start\").order(\"created_at\", {\n        ascending: false\n    }).limit(1);\n    if (startError) {\n        console.error(\"게임 시작 액션 조회 오류:\", startError);\n        return false;\n    }\n    const roundStartTime = startAction && startAction.length > 0 ? startAction[0].created_at : new Date(0).toISOString();\n    // 각 활성 플레이어별로 마지막 액션 확인\n    for (const player of activePlayers){\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"game_actions\").select(\"player_id\").eq(\"game_id\", gameId).eq(\"player_id\", player.id).in(\"action_type\", [\n            \"bet\",\n            \"call\",\n            \"raise\",\n            \"half\",\n            \"check\",\n            \"die\"\n        ]).gt(\"created_at\", roundStartTime).order(\"created_at\", {\n            ascending: false\n        }).limit(1);\n        if (error || !data || data.length === 0) {\n            return false; // 플레이어가 현재 라운드에서 액션을 취하지 않았음\n        }\n        playerLastActions.add(player.id);\n    }\n    // 모든 활성 플레이어가 액션을 취했는지 확인\n    return playerLastActions.size === activePlayers.length;\n}\n/**\n * 게임 종료 처리\n */ async function finishGame(gameId) {\n    // 게임 상태 조회\n    const gameState = await getGameState(gameId);\n    // 활성 플레이어 (다이하지 않은 플레이어 중 카드가 있는 플레이어)\n    const activePlayers = gameState.players.filter((p)=>!p.isDie && p.cards && p.cards.length === 2).map((p)=>({\n            id: p.id,\n            cards: p.cards,\n            isDie: p.isDie || false\n        }));\n    if (activePlayers.length === 0) {\n        console.error(\"활성 플레이어가 없습니다\");\n        return;\n    }\n    // 승자 결정\n    const { winnerId, isRegame } = (0,_utils_gameLogic__WEBPACK_IMPORTED_MODULE_1__.determineWinner)(activePlayers);\n    // 재경기 처리\n    if (isRegame) {\n        await handleRegame(gameId);\n        return;\n    }\n    if (!winnerId) {\n        console.log(\"승자를 결정할 수 없음 (구사 등의 특수 상황)\");\n        return;\n    }\n    // 승자 찾기\n    const winner = gameState.players.find((p)=>p.id === winnerId);\n    if (!winner) {\n        console.error(\"승자 정보를 찾을 수 없음\");\n        return;\n    }\n    // 땡값 계산 처리\n    let winnings = gameState.bettingValue;\n    let dangValues = {};\n    // 활성 플레이어 중 패자들 확인\n    for (const player of gameState.players.filter((p)=>!p.isDie && p.id !== winnerId)){\n        // 승자 패 확인\n        const winnerEval = (0,_utils_gameLogic__WEBPACK_IMPORTED_MODULE_1__.evaluateCards)(winner.cards || []);\n        // 패자 패 확인\n        const loserEval = (0,_utils_gameLogic__WEBPACK_IMPORTED_MODULE_1__.evaluateCards)(player.cards || []);\n        // 땡값 계산 - 승자가 땡잡이고 패자가 땡일 경우\n        if (winnerEval.rank === \"땡잡이\" && loserEval.rank.includes(\"땡\") && !loserEval.rank.includes(\"광땡\") && loserEval.rank !== \"10땡\") {\n            const dangValue = calculateDangValue(loserEval.rank, gameState.bettingValue);\n            dangValues[player.id] = dangValue;\n            winnings += dangValue;\n        }\n        // 암행어사와 광땡 처리\n        if (winnerEval.rank === \"암행어사\" && (loserEval.rank === \"13광땡\" || loserEval.rank === \"18광땡\")) {\n            // 광땡에 대한 암행어사 배당 (일반적으로 3배)\n            const amhaengValue = gameState.bettingValue * 3;\n            dangValues[player.id] = amhaengValue;\n            winnings += amhaengValue;\n        }\n        // 38광땡이 다른 광땡을 이겼을 경우 (상위 광땡이 하위 광땡 배당)\n        if (winnerEval.rank === \"38광땡\" && (loserEval.rank === \"13광땡\" || loserEval.rank === \"18광땡\")) {\n            const gwangDangValue = gameState.bettingValue * 2;\n            dangValues[player.id] = gwangDangValue;\n            winnings += gwangDangValue;\n        }\n    }\n    // 승자의 잔액 업데이트\n    const { error: winnerUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n        balance: winner.balance + winnings\n    }).eq(\"id\", winnerId);\n    if (winnerUpdateError) {\n        console.error(\"승자 잔액 업데이트 오류:\", winnerUpdateError);\n        throw new Error(\"승자 잔액을 업데이트할 수 없습니다.\");\n    }\n    // 땡값이 있다면 패자들의 잔액 추가 차감\n    for (const [playerId, dangValue] of Object.entries(dangValues)){\n        const loser = gameState.players.find((p)=>p.id === playerId);\n        if (loser) {\n            const { error: loserUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n                balance: Math.max(0, loser.balance - dangValue) // 최소 0으로 제한\n            }).eq(\"id\", playerId);\n            if (loserUpdateError) {\n                console.error(\"패자 잔액 업데이트 오류:\", loserUpdateError);\n            }\n        }\n    }\n    // 게임 상태 업데이트\n    const { error: gameUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").update({\n        status: \"finished\",\n        winner: winnerId,\n        show_cards: true,\n        dang_values: dangValues\n    }).eq(\"id\", gameId);\n    if (gameUpdateError) {\n        console.error(\"게임 종료 상태 업데이트 오류:\", gameUpdateError);\n        throw new Error(\"게임을 종료할 수 없습니다.\");\n    }\n    // 결과 액션 기록\n    await recordGameAction(gameId, \"show\", winnerId);\n}\n// 땡값 계산 함수\nfunction calculateDangValue(rank, bettingValue) {\n    // 광땡 배당\n    if (rank === \"38광땡\") return bettingValue * 10;\n    if (rank === \"13광땡\") return bettingValue * 8;\n    if (rank === \"18광땡\") return bettingValue * 7;\n    // 일반 땡 배당\n    if (rank === \"10땡\" || rank === \"장땡\") return bettingValue * 5;\n    if (rank === \"9땡\") return bettingValue * 4.5;\n    if (rank === \"8땡\") return bettingValue * 4;\n    if (rank === \"7땡\") return bettingValue * 3.5;\n    if (rank === \"6땡\") return bettingValue * 3;\n    if (rank === \"5땡\") return bettingValue * 2.5;\n    if (rank === \"4땡\") return bettingValue * 2;\n    if (rank === \"3땡\") return bettingValue * 1.5;\n    if (rank === \"2땡\") return bettingValue * 1.25;\n    if (rank === \"1땡\") return bettingValue * 1;\n    // 특수 조합 배당\n    if (rank === \"암행어사\") return bettingValue * 3; // 광땡 잡았을 때\n    return 0; // 땡이 아닌 경우\n}\n// 재경기 처리 함수\nasync function handleRegame(gameId) {\n    const gameState = await getGameState(gameId);\n    // 플레이어들 카드 초기화 \n    for (const player of gameState.players){\n        const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n            cards: null,\n            is_die: false\n        }).eq(\"id\", player.id);\n        if (error) {\n            console.error(\"플레이어 카드 초기화 오류:\", error);\n        }\n    }\n    // 게임 상태 업데이트 - 배팅값은 유지하며 재시작\n    const { error: gameUpdateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").update({\n        status: \"regame\",\n        current_turn: null,\n        winner: null,\n        regame_start_time: new Date().toISOString(),\n        regame_wait_time: REGAME_WAIT_TIME_MS\n    }).eq(\"id\", gameId);\n    if (gameUpdateError) {\n        console.error(\"재경기 설정 오류:\", gameUpdateError);\n        throw new Error(\"재경기를 설정할 수 없습니다.\");\n    }\n    // 재경기 액션 기록\n    await recordGameAction(gameId, \"regame\", null);\n    // 1초마다 대기 시간 업데이트\n    let remainingTime = Math.floor(REGAME_WAIT_TIME_MS / 1000);\n    const intervalId = setInterval(async ()=>{\n        remainingTime--;\n        // 남은 시간 업데이트\n        await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"games\").update({\n            regame_remaining_time: remainingTime\n        }).eq(\"id\", gameId);\n        if (remainingTime <= 0) {\n            clearInterval(intervalId);\n        }\n    }, 1000);\n    // 잠시 후 게임 재시작\n    setTimeout(async ()=>{\n        try {\n            clearInterval(intervalId); // 혹시 남아있는 인터벌 정리\n            await startGame(gameId);\n        } catch (err) {\n            console.error(\"재경기 시작 오류:\", err);\n        }\n    }, REGAME_WAIT_TIME_MS);\n}\n// 플레이어 좌석 업데이트\nasync function updateSeat(gameId, playerId, seatIndex) {\n    try {\n        // 해당 좌석이 이미 사용 중인지 확인\n        const { data: existingPlayer, error: checkError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").select(\"id\").eq(\"game_id\", gameId).eq(\"seat_index\", seatIndex);\n        if (checkError) {\n            console.error(\"좌석 확인 오류:\", checkError);\n            throw new Error(\"좌석 정보를 확인할 수 없습니다.\");\n        }\n        // 이미 다른 플레이어가 해당 좌석에 앉아있으면 오류\n        if (existingPlayer && existingPlayer.length > 0 && existingPlayer[0].id !== playerId) {\n            throw new Error(\"이미 다른 플레이어가 사용 중인 좌석입니다.\");\n        }\n        // 플레이어 좌석 업데이트\n        const { error: updateError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"players\").update({\n            seat_index: seatIndex\n        }).eq(\"game_id\", gameId).eq(\"id\", playerId);\n        if (updateError) {\n            console.error(\"좌석 업데이트 오류:\", updateError);\n            throw new Error(\"좌석을 업데이트할 수 없습니다: \" + updateError.message);\n        }\n    } catch (err) {\n        console.error(\"좌석 업데이트 중 예외 발생:\", err);\n        throw err;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLE1BQU01SywrQ0FBUUEsQ0FDL0RtQixJQUFJLENBQUMsV0FDTE8sTUFBTSxDQUFDLE1BQ1BRLEVBQUUsQ0FBQyxXQUFXMUIsUUFDZDBCLEVBQUUsQ0FBQyxjQUFjRDtRQUVwQixJQUFJMkksWUFBWTtZQUNkakosUUFBUVYsS0FBSyxDQUFDLGFBQWEySjtZQUMzQixNQUFNLElBQUloSixNQUFNO1FBQ2xCO1FBRUEsOEJBQThCO1FBQzlCLElBQUlZLGtCQUFrQkEsZUFBZXFDLE1BQU0sR0FBRyxLQUFLckMsY0FBYyxDQUFDLEVBQUUsQ0FBQ25CLEVBQUUsS0FBS1osVUFBVTtZQUNwRixNQUFNLElBQUltQixNQUFNO1FBQ2xCO1FBRUEsZUFBZTtRQUNmLE1BQU0sRUFBRVgsT0FBT29FLFdBQVcsRUFBRSxHQUFHLE1BQU1yRiwrQ0FBUUEsQ0FDMUNtQixJQUFJLENBQUMsV0FDTHVCLE1BQU0sQ0FBQztZQUFFVSxZQUFZbkI7UUFBVSxHQUMvQkMsRUFBRSxDQUFDLFdBQVcxQixRQUNkMEIsRUFBRSxDQUFDLE1BQU16QjtRQUVaLElBQUk0RSxhQUFhO1lBQ2YxRCxRQUFRVixLQUFLLENBQUMsZUFBZW9FO1lBQzdCLE1BQU0sSUFBSXpELE1BQU0sdUJBQXVCeUQsWUFBWXhELE9BQU87UUFDNUQ7SUFDRixFQUFFLE9BQU9FLEtBQUs7UUFDWkosUUFBUVYsS0FBSyxDQUFDLG9CQUFvQmM7UUFDbEMsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvZ2FtZUFwaS50cz81NDg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi9zdXBhYmFzZSc7XG5pbXBvcnQgeyBHYW1lU3RhdGUsIENyZWF0ZUdhbWVSZXNwb25zZSwgSm9pbkdhbWVSZXNwb25zZSwgQmV0QWN0aW9uVHlwZSB9IGZyb20gJ0AvdHlwZXMvZ2FtZSc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IGRldGVybWluZVdpbm5lciwgZXZhbHVhdGVDYXJkcyB9IGZyb20gJ0AvdXRpbHMvZ2FtZUxvZ2ljJztcbmltcG9ydCB7IFBsYXllciB9IGZyb20gJ0AvdHlwZXMvZ2FtZSc7XG5cbi8vIOyDgeyImCDsoJXsnZggKO2MjOydvCDsg4Hri6jsl5Ag7LaU6rCAKVxuY29uc3QgUkVHQU1FX1dBSVRfVElNRV9NUyA9IDUwMDA7IC8vIOyerOqyveq4sCDrjIDquLAg7Iuc6rCEICg17LSIKVxuXG4vKipcbiAqIOyDiOuhnOyatCDqsozsnoQg7IOd7ISxXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVHYW1lKHVzZXJuYW1lOiBzdHJpbmcpOiBQcm9taXNlPENyZWF0ZUdhbWVSZXNwb25zZT4ge1xuICBjb25zdCBnYW1lSWQgPSB1dWlkdjQoKTtcbiAgY29uc3QgcGxheWVySWQgPSB1dWlkdjQoKTtcbiAgLy8g7J6E7IucIOyCrOyaqeyekCBJRCDsg53shLFcbiAgY29uc3QgdXNlcklkID0gYHVzZXJfJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSl9YDtcbiAgXG4gIHRyeSB7XG4gICAgLy8g6rKM7J6EIOyDneyEsVxuICAgIGNvbnN0IHsgZGF0YTogZ2FtZURhdGEsIGVycm9yOiBnYW1lRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnZ2FtZXMnKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIGlkOiBnYW1lSWQsXG4gICAgICAgIHN0YXR1czogJ3dhaXRpbmcnLFxuICAgICAgICBjdXJyZW50X3R1cm46IG51bGwsXG4gICAgICAgIGJldHRpbmdfdmFsdWU6IDAsXG4gICAgICAgIHdpbm5lcjogbnVsbFxuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoKTtcbiAgICBcbiAgICBpZiAoZ2FtZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfqsozsnoQg7IOd7ISxIOyYpOulmCDshLjrtoAg7KCV67O0OicsIGdhbWVFcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyehOydhCDsg53shLHtlaAg7IiYIOyXhuyKteuLiOuLpDogJyArIGdhbWVFcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+qyjOyehCDsg53shLEg7ISx6rO1OicsIGdhbWVJZCk7XG4gICAgXG4gICAgLy8g6rSA7LCw7J6QIOuqqOuTnOuhnCDsi5zsnpHtlZjrr4DroZwg7ZSM66CI7J207Ja066W8IOyDneyEse2VmOyngCDslYrsnYxcbiAgICAvLyDtgbTrnbzsnbTslrjtirjripQg67mIIOyekOumrOulvCDtgbTrpq3tlbQg7LC47Jes7ZW07JW8IO2VqFxuICAgIFxuICAgIHJldHVybiB7IGdhbWVJZCwgcGxheWVySWQ6IG51bGwgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcign6rKM7J6EIOyDneyEsSDspJEg7JiI7Jm4IOuwnOyDnTonLCBlcnIpO1xuICAgIHRocm93IGVycjtcbiAgfVxufVxuXG4vKipcbiAqIOq4sOyhtCDqsozsnoTsl5Ag7LC46rCAXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBqb2luR2FtZShcbiAgZ2FtZUlkOiBzdHJpbmcsIFxuICB1c2VybmFtZTogc3RyaW5nLCBcbiAgc2VhdEluZGV4PzogbnVtYmVyXG4pOiBQcm9taXNlPEpvaW5HYW1lUmVzcG9uc2U+IHtcbiAgdHJ5IHtcbiAgICAvLyDqsozsnoQg7IOB7YOcIOyytO2BrFxuICAgIGNvbnN0IHsgZGF0YTogZ2FtZURhdGEsIGVycm9yOiBnYW1lRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnZ2FtZXMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgZ2FtZUlkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGdhbWVFcnJvciB8fCAhZ2FtZURhdGEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+qyjOyehCDsobDtmowg7Jik66WYIOyEuOu2gCDsoJXrs7Q6JywgZ2FtZUVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6rKM7J6E7J2EIOywvuydhCDsiJgg7JeG7Iq164uI64ukOiAnICsgKGdhbWVFcnJvcj8ubWVzc2FnZSB8fCAn7JWMIOyImCDsl4bripQg7Jik66WYJykpO1xuICAgIH1cbiAgICBcbiAgICAvLyDroZzsu6wg7Iqk7Yag66as7KeA7JeQ7IScIOyCrOyaqeyekCBJROyZgCDtlIzroIjsnbTslrQgSUQg7ZmV7J24XG4gICAgY29uc3Qgc3RvcmVkVXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYGdhbWVfJHtnYW1lSWR9X3VzZXJfaWRgKTtcbiAgICBjb25zdCBzdG9yZWRQbGF5ZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBnYW1lXyR7Z2FtZUlkfV9wbGF5ZXJfaWRgKTtcbiAgICBcbiAgICAvLyDquLDsobQg7LC47Jes7J6Q7J247KeAIO2ZleyduFxuICAgIGlmIChzdG9yZWRVc2VySWQgJiYgc3RvcmVkUGxheWVySWQpIHtcbiAgICAgIC8vIOq4sOyhtCDtlIzroIjsnbTslrQg7KCV67O0IOyhsO2ajFxuICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1BsYXllciwgZXJyb3I6IGV4aXN0aW5nUGxheWVyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwbGF5ZXJzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5lcSgnZ2FtZV9pZCcsIGdhbWVJZClcbiAgICAgICAgLmVxKCdpZCcsIHN0b3JlZFBsYXllcklkKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIGlmICghZXhpc3RpbmdQbGF5ZXJFcnJvciAmJiBleGlzdGluZ1BsYXllcikge1xuICAgICAgICBjb25zb2xlLmxvZygn6riw7KG0IO2UjOugiOydtOyWtOuhnCDsnqzsoJHsho06JywgZXhpc3RpbmdQbGF5ZXIuaWQpO1xuICAgICAgICBcbiAgICAgICAgLy8g7J2066aEIOyXheuNsOydtO2KuOqwgCDtlYTsmpTtlZwg6rK97JqwXG4gICAgICAgIGlmIChleGlzdGluZ1BsYXllci51c2VybmFtZSAhPT0gdXNlcm5hbWUpIHtcbiAgICAgICAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgLmZyb20oJ3BsYXllcnMnKVxuICAgICAgICAgICAgLnVwZGF0ZSh7IHVzZXJuYW1lIH0pXG4gICAgICAgICAgICAuZXEoJ2lkJywgZXhpc3RpbmdQbGF5ZXIuaWQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDstZzsi6Ag6rKM7J6EIOyDge2DnCDqsIDsoLjsmKTquLBcbiAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gYXdhaXQgZ2V0R2FtZVN0YXRlKGdhbWVJZCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICBwbGF5ZXJJZDogZXhpc3RpbmdQbGF5ZXIuaWQsIFxuICAgICAgICAgIGdhbWVTdGF0ZSxcbiAgICAgICAgICByZWpvaW5lZDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyDsg4gg7ZSM66CI7J207Ja0IOywuOqwgCAo6rKM7J6E7J20IOuMgOq4sCDspJHsnbwg65WM66eMKVxuICAgIGlmIChnYW1lRGF0YS5zdGF0dXMgIT09ICd3YWl0aW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfsnbTrr7gg7Iuc7J6R65CcIOqyjOyehOyXkOuKlCDssLjqsIDtlaAg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcGxheWVySWQgPSB1dWlkdjQoKTtcbiAgICAvLyDsnoTsi5wg7IKs7Jqp7J6QIElEIOyDneyEsVxuICAgIGNvbnN0IHVzZXJJZCA9IGB1c2VyXyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDkpfWA7XG4gICAgXG4gICAgLy8g7ZSM66CI7J207Ja0IOyDneyEsVxuICAgIGNvbnN0IHsgZGF0YTogcGxheWVyRGF0YSwgZXJyb3I6IHBsYXllckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BsYXllcnMnKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIGlkOiBwbGF5ZXJJZCxcbiAgICAgICAgZ2FtZV9pZDogZ2FtZUlkLFxuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICBiYWxhbmNlOiAxMDAwMCxcbiAgICAgICAgaXNfZGllOiBmYWxzZSxcbiAgICAgICAgc2VhdF9pbmRleDogc2VhdEluZGV4XG4gICAgICB9KVxuICAgICAgLnNlbGVjdCgpO1xuICAgIFxuICAgIGlmIChwbGF5ZXJFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign7ZSM66CI7J207Ja0IOyDneyEsSDsmKTrpZgg7IS467aAIOygleuztDonLCBwbGF5ZXJFcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyehOyXkCDssLjqsIDtlaAg7IiYIOyXhuyKteuLiOuLpDogJyArIHBsYXllckVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn7ZSM66CI7J207Ja0IOywuOqwgCDshLHqs7U6JywgcGxheWVySWQpO1xuICAgIFxuICAgIC8vIOuhnOy7rCDsiqTthqDrpqzsp4Dsl5Ag7IKs7Jqp7J6QIOygleuztCDsoIDsnqVcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgZ2FtZV8ke2dhbWVJZH1fdXNlcl9pZGAsIHVzZXJJZCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGdhbWVfJHtnYW1lSWR9X3BsYXllcl9pZGAsIHBsYXllcklkKTtcbiAgICBcbiAgICAvLyDstZzsi6Ag6rKM7J6EIOyDge2DnCDqsIDsoLjsmKTquLBcbiAgICBjb25zdCBnYW1lU3RhdGUgPSBhd2FpdCBnZXRHYW1lU3RhdGUoZ2FtZUlkKTtcbiAgICBcbiAgICByZXR1cm4geyBwbGF5ZXJJZCwgZ2FtZVN0YXRlIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+qyjOyehCDssLjqsIAg7KSRIOyYiOyZuCDrsJzsg506JywgZXJyKTtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbn1cblxuLyoqXG4gKiDqsozsnoQg7IOB7YOcIOyhsO2ajFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R2FtZVN0YXRlKGdhbWVJZDogc3RyaW5nKTogUHJvbWlzZTxHYW1lU3RhdGU+IHtcbiAgLy8g6rKM7J6EIOygleuztCDqsIDsoLjsmKTquLBcbiAgY29uc3QgeyBkYXRhOiBnYW1lRGF0YSwgZXJyb3I6IGdhbWVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ2FtZXMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnaWQnLCBnYW1lSWQpXG4gICAgLnNpbmdsZSgpO1xuXG4gIGlmIChnYW1lRXJyb3IgfHwgIWdhbWVEYXRhKSB7XG4gICAgY29uc29sZS5lcnJvcign6rKM7J6EIOyhsO2ajCDsmKTrpZg6JywgZ2FtZUVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyehOydhCDssL7snYQg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgfVxuICBcbiAgLy8g7ZSM66CI7J207Ja0IOygleuztCDqsIDsoLjsmKTquLBcbiAgY29uc3QgeyBkYXRhOiBwbGF5ZXJzRGF0YSwgZXJyb3I6IHBsYXllcnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgncGxheWVycycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdnYW1lX2lkJywgZ2FtZUlkKTtcbiAgXG4gIGlmIChwbGF5ZXJzRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCftlIzroIjsnbTslrQg7KGw7ZqMIOyYpOulmDonLCBwbGF5ZXJzRXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcign7ZSM66CI7J207Ja0IOygleuztOulvCDrtojrn6zsmKwg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgfVxuICBcbiAgLy8g7J6s6rK96riwIOuCqOydgCDsi5zqsIQg6rOE7IKwXG4gIGxldCByZWdhbWVSZW1haW5pbmdUaW1lOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIGlmIChnYW1lRGF0YS5zdGF0dXMgPT09ICdyZWdhbWUnICYmIGdhbWVEYXRhLnJlZ2FtZV9zdGFydF90aW1lICYmIGdhbWVEYXRhLnJlZ2FtZV93YWl0X3RpbWUpIHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZShnYW1lRGF0YS5yZWdhbWVfc3RhcnRfdGltZSkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZWxhcHNlZE1zID0gY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XG4gICAgY29uc3QgcmVtYWluaW5nTXMgPSBNYXRoLm1heCgwLCBnYW1lRGF0YS5yZWdhbWVfd2FpdF90aW1lIC0gZWxhcHNlZE1zKTtcbiAgICByZWdhbWVSZW1haW5pbmdUaW1lID0gTWF0aC5jZWlsKHJlbWFpbmluZ01zIC8gMTAwMCk7XG4gIH1cbiAgXG4gIC8vIOqyjOyehCDsg4Htg5wg7KCV67O0IO2PrOunt+2MhVxuICBjb25zdCBnYW1lU3RhdGU6IEdhbWVTdGF0ZSA9IHtcbiAgICBpZDogZ2FtZURhdGEuaWQsXG4gICAgc3RhdHVzOiBnYW1lRGF0YS5zdGF0dXMsXG4gICAgcGxheWVyczogcGxheWVyc0RhdGEubWFwKHBsYXllciA9PiAoe1xuICAgICAgaWQ6IHBsYXllci5pZCxcbiAgICAgIHVzZXJfaWQ6IHBsYXllci51c2VyX2lkLFxuICAgICAgdXNlcm5hbWU6IHBsYXllci51c2VybmFtZSxcbiAgICAgIGJhbGFuY2U6IHBsYXllci5iYWxhbmNlLFxuICAgICAgY2FyZHM6IHBsYXllci5jYXJkcyB8fCBbXSxcbiAgICAgIGlzRGllOiBwbGF5ZXIuaXNfZGllLFxuICAgICAgc2VhdF9pbmRleDogcGxheWVyLnNlYXRfaW5kZXhcbiAgICB9KSksXG4gICAgY3VycmVudFR1cm46IGdhbWVEYXRhLmN1cnJlbnRfdHVybiB8fCAnJyxcbiAgICB3aW5uZXI6IGdhbWVEYXRhLndpbm5lcixcbiAgICBiZXR0aW5nVmFsdWU6IGdhbWVEYXRhLmJldHRpbmdfdmFsdWUsXG4gICAgcmVnYW1lX3JlbWFpbmluZ190aW1lOiByZWdhbWVSZW1haW5pbmdUaW1lLFxuICAgIHJlZ2FtZV9zdGFydF90aW1lOiBnYW1lRGF0YS5yZWdhbWVfc3RhcnRfdGltZVxuICB9O1xuICBcbiAgcmV0dXJuIGdhbWVTdGF0ZTtcbn1cblxuLyoqXG4gKiDqsozsnoQg7Iuc7J6RXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFydEdhbWUoZ2FtZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8g6rKM7J6EIOuwjyDtlIzroIjsnbTslrQg7KCV67O0IOqwgOyguOyYpOq4sFxuICBjb25zdCB7IGRhdGE6IHBsYXllcnNEYXRhLCBlcnJvcjogcGxheWVyc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdwbGF5ZXJzJylcbiAgICAuc2VsZWN0KCdpZCcpXG4gICAgLmVxKCdnYW1lX2lkJywgZ2FtZUlkKTtcblxuICBpZiAocGxheWVyc0Vycm9yIHx8ICFwbGF5ZXJzRGF0YSB8fCBwbGF5ZXJzRGF0YS5sZW5ndGggPCAyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCfstZzshowgMuuqheydmCDtlIzroIjsnbTslrTqsIAg7ZWE7JqU7ZWp64uI64ukLicpO1xuICB9XG4gIFxuICAvLyDsubTrk5wg642xIOyDneyEsSDrsI8g7IWU7ZSMXG4gIGNvbnN0IGRlY2sgPSBjcmVhdGVTaHVmZmxlZERlY2soKTtcbiAgXG4gIC8vIO2UjOugiOydtOyWtOuTpOyXkOqyjCDsubTrk5wg67Cw67aEIOuwjyDsl4XrjbDsnbTtirhcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwbGF5ZXJzRGF0YS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHBsYXllckNhcmRzID0gW2RlY2sucG9wKCksIGRlY2sucG9wKCldLmZpbHRlcihCb29sZWFuKSBhcyBudW1iZXJbXTtcbiAgICBcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwbGF5ZXJzJylcbiAgICAgIC51cGRhdGUoeyBjYXJkczogcGxheWVyQ2FyZHMgfSlcbiAgICAgIC5lcSgnaWQnLCBwbGF5ZXJzRGF0YVtpXS5pZCk7XG4gICAgXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCftlIzroIjsnbTslrQg7Lm065OcIOyXheuNsOydtO2KuCDsmKTrpZg6JywgdXBkYXRlRXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfsubTrk5zrpbwg67Cw67aE7ZWgIOyImCDsl4bsirXri4jri6QuJyk7XG4gICAgfVxuICB9XG4gIFxuICAvLyDssqsg7YS07J2EIOuenOuNpOycvOuhnCDshKDtg51cbiAgY29uc3QgZmlyc3RUdXJuID0gcGxheWVyc0RhdGFbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcGxheWVyc0RhdGEubGVuZ3RoKV0uaWQ7XG4gIFxuICAvLyDqsozsnoQg7IOB7YOcIOyXheuNsOydtO2KuFxuICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ2FtZXMnKVxuICAgIC51cGRhdGUoe1xuICAgICAgc3RhdHVzOiAncGxheWluZycsXG4gICAgICBjdXJyZW50X3R1cm46IGZpcnN0VHVybixcbiAgICAgIGJldHRpbmdfdmFsdWU6IDBcbiAgICB9KVxuICAgIC5lcSgnaWQnLCBnYW1lSWQpO1xuICBcbiAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign6rKM7J6EIOyDge2DnCDsl4XrjbDsnbTtirgg7Jik66WYOicsIHVwZGF0ZUVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyehOydhCDsi5zsnpHtlaAg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgfVxuICBcbiAgLy8g6rKM7J6EIOyLnOyekSDslaHshZgg6riw66GdXG4gIGF3YWl0IHJlY29yZEdhbWVBY3Rpb24oZ2FtZUlkLCAnc3RhcnQnLCBmaXJzdFR1cm4pO1xufVxuXG4vKipcbiAqIOuyoO2MhVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGxhY2VCZXQoXG4gIGdhbWVJZDogc3RyaW5nLCBcbiAgcGxheWVySWQ6IHN0cmluZywgXG4gIGFjdGlvblR5cGU6IEJldEFjdGlvblR5cGUsIFxuICBhbW91bnQ/OiBudW1iZXJcbik6IFByb21pc2U8dm9pZD4ge1xuICAvLyDqsozsnoQg7IOB7YOcIO2ZleyduFxuICBjb25zdCBnYW1lU3RhdGUgPSBhd2FpdCBnZXRHYW1lU3RhdGUoZ2FtZUlkKTtcbiAgXG4gIGlmIChnYW1lU3RhdGUuc3RhdHVzICE9PSAncGxheWluZycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+qyjOyehOydtCDsp4Ttlokg7KSR7J20IOyVhOuLmeuLiOuLpC4nKTtcbiAgfVxuICBcbiAgaWYgKGdhbWVTdGF0ZS5jdXJyZW50VHVybiAhPT0gcGxheWVySWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+uLueyLoOydmCDthLTsnbQg7JWE64uZ64uI64ukLicpO1xuICB9XG4gIFxuICBjb25zdCBwbGF5ZXIgPSBnYW1lU3RhdGUucGxheWVycy5maW5kKHAgPT4gcC5pZCA9PT0gcGxheWVySWQpO1xuICBpZiAoIXBsYXllcikge1xuICAgIHRocm93IG5ldyBFcnJvcign7ZSM66CI7J207Ja066W8IOywvuydhCDsiJgg7JeG7Iq164uI64ukLicpO1xuICB9XG5cbiAgLy8g7LWc6re8IOuwsO2MhSDslaHshZgg7KGw7ZqMXG4gIGNvbnN0IHsgZGF0YTogYWN0aW9uc0RhdGEsIGVycm9yOiBhY3Rpb25zRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dhbWVfYWN0aW9ucycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdnYW1lX2lkJywgZ2FtZUlkKVxuICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgIC5saW1pdCgxMCk7XG5cbiAgaWYgKGFjdGlvbnNFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+qyjOyehCDslaHshZgg7KGw7ZqMIOyYpOulmDonLCBhY3Rpb25zRXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcign6rKM7J6EIOyVoeyFmOydhCDsobDtmoztlaAg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgfVxuXG4gIC8vIOuniOyngOuniSDrsLDtjIUg7JWh7IWYIOywvuq4sFxuICBjb25zdCBsYXN0QmV0QWN0aW9uID0gYWN0aW9uc0RhdGE/LmZpbmQoYWN0aW9uID0+IFxuICAgIFsnYmV0JywgJ3JhaXNlJywgJ2NhbGwnLCAnaGFsZiddLmluY2x1ZGVzKGFjdGlvbi5hY3Rpb25fdHlwZSkgJiYgXG4gICAgYWN0aW9uLnBsYXllcl9pZCAhPT0gcGxheWVySWRcbiAgKTtcblxuICAvLyDslaHshZgg67OEIOuwsO2MhSDquIjslaEg6rOE7IKwXG4gIGxldCBiZXRBbW91bnQgPSAwO1xuICBjb25zdCBiYXNlQmV0ID0gZ2FtZVN0YXRlLmJhc2VCZXQgfHwgNTAwOyAvLyDquLDrs7gg67Cw7YyF7JWhXG4gIFxuICBzd2l0Y2ggKGFjdGlvblR5cGUpIHtcbiAgICBjYXNlICdjaGVjayc6XG4gICAgICAvLyDsnbTsoIQg67Kg7YyF7J20IOyXhuydhCDrlYzrp4wg6rCA64qlXG4gICAgICBpZiAobGFzdEJldEFjdGlvbiAmJiBsYXN0QmV0QWN0aW9uLmFtb3VudCA+IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfsnbTsoIQg67Kg7YyF7J20IOyeiOyWtCDssrTtgaztlaAg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgICAgIH1cbiAgICAgIGJldEFtb3VudCA9IDA7XG4gICAgICBicmVhaztcbiAgICAgIFxuICAgIGNhc2UgJ2NhbGwnOlxuICAgICAgLy8g7J207KCEIOuyoO2MheyVoeqzvCDrj5nsnbztlZjqsoxcbiAgICAgIGJldEFtb3VudCA9IGxhc3RCZXRBY3Rpb24/LmFtb3VudCB8fCBiYXNlQmV0O1xuICAgICAgYnJlYWs7XG4gICAgICBcbiAgICBjYXNlICdoYWxmJzpcbiAgICAgIC8vIO2Mn+ydmCDsoIjrsJhcbiAgICAgIGJldEFtb3VudCA9IE1hdGguZmxvb3IoZ2FtZVN0YXRlLmJldHRpbmdWYWx1ZSAvIDIpO1xuICAgICAgLy8g7LWc7IaMIOq4sOuzuCDrsLDtjIXslaEg67O07J6lXG4gICAgICBiZXRBbW91bnQgPSBiZXRBbW91bnQgPCBiYXNlQmV0ID8gYmFzZUJldCA6IGJldEFtb3VudDtcbiAgICAgIGJyZWFrO1xuICAgICAgXG4gICAgY2FzZSAnYmV0JzpcbiAgICBjYXNlICdyYWlzZSc6XG4gICAgICAvLyDsgqzsmqnsnpDqsIAg7KeA7KCV7ZWcIOq4iOyVoVxuICAgICAgaWYgKCFhbW91bnQgfHwgYW1vdW50IDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfrsqDtjIUg6riI7JWh7J2AIDDrs7Tri6Qg7Luk7JW8IO2VqeuLiOuLpC4nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g7LWc7IaMIOuyoO2MheyVoSDtmZXsnbhcbiAgICAgIGNvbnN0IG1pbkJldCA9IGxhc3RCZXRBY3Rpb24gPyBsYXN0QmV0QWN0aW9uLmFtb3VudCAqIDIgOiBiYXNlQmV0O1xuICAgICAgaWYgKGFtb3VudCA8IG1pbkJldCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOy1nOyGjCDrsqDtjIXslaHsnYAgJHttaW5CZXR97J6F64uI64ukLmApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDstZzrjIAg67Kg7YyF7JWhICjsmKzsnbgg7J207Jm4KeydgCDrs7TsnKDrn4lcbiAgICAgIGJldEFtb3VudCA9IGFtb3VudDtcbiAgICAgIGJyZWFrO1xuICAgICAgXG4gICAgY2FzZSAnZGllJzpcbiAgICAgIC8vIOuLpOydtOuKlCDruYTsmqkg7JeG7J2MXG4gICAgICBiZXRBbW91bnQgPSAwO1xuICAgICAgYnJlYWs7XG4gICAgICBcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKCfsnpjrqrvrkJwg7JWh7IWYIO2DgOyeheyeheuLiOuLpC4nKTtcbiAgfVxuICBcbiAgLy8g7J6U7JWhIO2ZleyduFxuICBpZiAoYWN0aW9uVHlwZSAhPT0gJ2RpZScgJiYgcGxheWVyLmJhbGFuY2UgPCBiZXRBbW91bnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+yelOyVoeydtCDrtoDsobHtlanri4jri6QuJyk7XG4gIH1cbiAgXG4gIC8vIOyVoeyFmCDsspjrpqxcbiAgaWYgKGFjdGlvblR5cGUgPT09ICdkaWUnKSB7XG4gICAgLy8g7ZSM66CI7J207Ja066W8IOuLpOydtCDsg4Htg5zroZwg67OA6rK9XG4gICAgY29uc3QgeyBlcnJvcjogcGxheWVyVXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGxheWVycycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgaXNfZGllOiB0cnVlXG4gICAgICB9KVxuICAgICAgLmVxKCdpZCcsIHBsYXllcklkKTtcbiAgICBcbiAgICBpZiAocGxheWVyVXBkYXRlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+2UjOugiOydtOyWtCDri6TsnbQg7IOB7YOcIOyXheuNsOydtO2KuCDsmKTrpZg6JywgcGxheWVyVXBkYXRlRXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfri6TsnbTtlaAg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgICB9XG4gICAgXG4gICAgLy8g64Ko7J2AIO2UjOugiOydtOyWtCDtmZXsnbhcbiAgICBjb25zdCBhY3RpdmVQbGF5ZXJzID0gZ2FtZVN0YXRlLnBsYXllcnMuZmlsdGVyKHAgPT4gcC5pZCAhPT0gcGxheWVySWQgJiYgIXAuaXNEaWUpO1xuICAgIFxuICAgIGlmIChhY3RpdmVQbGF5ZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8g7ZWcIOuqheunjCDrgqjslZjsnLzrqbQg6rKM7J6EIOyiheujjFxuICAgICAgY29uc3Qgd2lubmVyID0gYWN0aXZlUGxheWVyc1swXS5pZDtcblxuICAgICAgLy8g7Iq57J6Q7J2YIOyelOyVoSDsl4XrjbDsnbTtirhcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHdpbm5lclVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncGxheWVycycpXG4gICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgIGJhbGFuY2U6IGFjdGl2ZVBsYXllcnNbMF0uYmFsYW5jZSArIGdhbWVTdGF0ZS5iZXR0aW5nVmFsdWVcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKCdpZCcsIHdpbm5lcik7XG4gICAgICBcbiAgICAgIGlmICh3aW5uZXJVcGRhdGVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfsirnsnpAg7J6U7JWhIOyXheuNsOydtO2KuCDsmKTrpZg6Jywgd2lubmVyVXBkYXRlRXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yKueyekCDsnpTslaHsnYQg7JeF642w7J207Yq47ZWgIOyImCDsl4bsirXri4jri6QuJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOqyjOyehCDsooXro4wg7IOB7YOcIOyXheuNsOydtO2KuFxuICAgICAgY29uc3QgeyBlcnJvcjogZ2FtZVVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgLmZyb20oJ2dhbWVzJylcbiAgICAgICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXG4gICAgICAgICAgd2lubmVyOiB3aW5uZXJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXEoJ2lkJywgZ2FtZUlkKTtcbiAgICAgIFxuICAgICAgaWYgKGdhbWVVcGRhdGVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfqsozsnoQg7KKF66OMIOyDge2DnCDsl4XrjbDsnbTtirgg7Jik66WYOicsIGdhbWVVcGRhdGVFcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6rKM7J6E7J2EIOyiheujjO2VoCDsiJgg7JeG7Iq164uI64ukLicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDslaHshZgg6riw66GdXG4gICAgICBhd2FpdCByZWNvcmRHYW1lQWN0aW9uKGdhbWVJZCwgJ2RpZScsIHBsYXllcklkKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g64uk7J2MIO2UjOugiOydtOyWtCDqsrDsoJVcbiAgICAgIGNvbnN0IG5leHRQbGF5ZXJUdXJuSWQgPSBnZXROZXh0UGxheWVyVHVybihnYW1lU3RhdGUucGxheWVycywgcGxheWVySWQpO1xuXG4gICAgICAvLyDqsozsnoQg7IOB7YOcIOyXheuNsOydtO2KuFxuICAgICAgY29uc3QgeyBlcnJvcjogZ2FtZVVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnZ2FtZXMnKVxuICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICBjdXJyZW50X3R1cm46IG5leHRQbGF5ZXJUdXJuSWRcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKCdpZCcsIGdhbWVJZCk7XG4gICAgICBcbiAgICAgIGlmIChnYW1lVXBkYXRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign6rKM7J6EIOyDge2DnCDsl4XrjbDsnbTtirgg7Jik66WYOicsIGdhbWVVcGRhdGVFcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcign6rKM7J6EIOyDge2DnOulvCDsl4XrjbDsnbTtirjtlaAg7IiYIOyXhuyKteuLiOuLpC4nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g7JWh7IWYIOq4sOuhnVxuICAgICAgYXdhaXQgcmVjb3JkR2FtZUFjdGlvbihnYW1lSWQsICdkaWUnLCBwbGF5ZXJJZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIFxuICAvLyDri6TsnYwg7ZSM66CI7J207Ja0IOqysOyglVxuICBjb25zdCBuZXh0UGxheWVyVHVybklkID0gZ2V0TmV4dFBsYXllclR1cm4oZ2FtZVN0YXRlLnBsYXllcnMsIHBsYXllcklkKTtcblxuICAvLyDqsozsnoQg7IOB7YOcIOyXheuNsOydtO2KuFxuICBjb25zdCB7IGVycm9yOiBnYW1lVXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2dhbWVzJylcbiAgICAudXBkYXRlKHtcbiAgICAgIGN1cnJlbnRfdHVybjogbmV4dFBsYXllclR1cm5JZCxcbiAgICAgIGJldHRpbmdfdmFsdWU6IGdhbWVTdGF0ZS5iZXR0aW5nVmFsdWUgKyBiZXRBbW91bnRcbiAgICB9KVxuICAgIC5lcSgnaWQnLCBnYW1lSWQpO1xuICBcbiAgaWYgKGdhbWVVcGRhdGVFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+qyjOyehCDsg4Htg5wg7JeF642w7J207Yq4IOyYpOulmDonLCBnYW1lVXBkYXRlRXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcign67Kg7YyF7ZWgIOyImCDsl4bsirXri4jri6QuJyk7XG4gIH1cbiAgXG4gIC8vIO2UjOugiOydtOyWtCDsnpTslaEg7JeF642w7J207Yq4XG4gIGlmIChiZXRBbW91bnQgPiAwKSB7XG4gICAgY29uc3QgeyBlcnJvcjogcGxheWVyVXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGxheWVycycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgYmFsYW5jZTogcGxheWVyLmJhbGFuY2UgLSBiZXRBbW91bnRcbiAgICAgIH0pXG4gICAgICAuZXEoJ2lkJywgcGxheWVySWQpO1xuICAgIFxuICAgIGlmIChwbGF5ZXJVcGRhdGVFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign7ZSM66CI7J207Ja0IOyelOyVoSDsl4XrjbDsnbTtirgg7Jik66WYOicsIHBsYXllclVwZGF0ZUVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcign7J6U7JWh7J2EIOyXheuNsOydtO2KuO2VoCDsiJgg7JeG7Iq164uI64ukLicpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8g66qo65OgIO2UjOugiOydtOyWtOqwgCDslaHshZjsnYQg7Leo7ZaI64qU7KeAIO2ZleyduFxuICBjb25zdCBhbGxQbGF5ZXJzVG9va0FjdGlvbiA9IGF3YWl0IGNoZWNrQWxsUGxheWVyc0hhZFR1cm4oZ2FtZUlkLCBnYW1lU3RhdGUucGxheWVycyk7XG4gIGNvbnN0IGFsbFBsYXllcnNNYXRjaGVkQmV0ID0gYXdhaXQgY2hlY2tBbGxQbGF5ZXJzTWF0Y2hlZEJldChnYW1lSWQsIGdhbWVTdGF0ZS5wbGF5ZXJzKTtcbiAgXG4gIC8vIOuqqOuToCDtlIzroIjsnbTslrTqsIAg7JWh7IWY7J2EIOy3qO2WiOqzoCwg67Cw7YyFIOq4iOyVoeydtCDsnbzsuZjtlZjrqbQg6rKM7J6EIOyiheujjFxuICBpZiAoYWxsUGxheWVyc1Rvb2tBY3Rpb24gJiYgYWxsUGxheWVyc01hdGNoZWRCZXQpIHtcbiAgICBjb25zb2xlLmxvZygn66qo65OgIO2UjOugiOydtOyWtCDslaHshZgg7JmE66OMLCDrsqDtjIUg6riI7JWhIOydvOy5mCAtIOqyjOyehCDsooXro4wnKTtcbiAgICBhd2FpdCBmaW5pc2hHYW1lKGdhbWVJZCk7XG4gIH0gZWxzZSB7XG4gICAgLy8g65SU67KE6re4IOuhnOq3uFxuICAgIGlmICghYWxsUGxheWVyc1Rvb2tBY3Rpb24pIHtcbiAgICAgIGNvbnNvbGUubG9nKCfslYTsp4Eg66qo65OgIO2UjOugiOydtOyWtOqwgCDslaHshZjsnYQg7Leo7ZWY7KeAIOyViuydjCcpO1xuICAgIH1cbiAgICBpZiAoIWFsbFBsYXllcnNNYXRjaGVkQmV0KSB7XG4gICAgICBjb25zb2xlLmxvZygn7ZSM66CI7J207Ja065Ok7J2YIOuyoO2MhSDquIjslaHsnbQg7J287LmY7ZWY7KeAIOyViuydjCcpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8g7JWh7IWYIOq4sOuhnVxuICBhd2FpdCByZWNvcmRHYW1lQWN0aW9uKGdhbWVJZCwgYWN0aW9uVHlwZSwgcGxheWVySWQsIGJldEFtb3VudCk7XG59XG5cbi8vIOuqqOuToCDtlIzroIjsnbTslrTqsIAg64+Z7J287ZWcIOq4iOyVoeydhCDrsLDtjIXtlojripTsp4Ag7ZmV7J24XG5hc3luYyBmdW5jdGlvbiBjaGVja0FsbFBsYXllcnNNYXRjaGVkQmV0KGdhbWVJZDogc3RyaW5nLCBwbGF5ZXJzOiBQbGF5ZXJbXSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBhY3RpdmVQbGF5ZXJzID0gcGxheWVycy5maWx0ZXIocCA9PiAhcC5pc0RpZSk7XG4gIFxuICBpZiAoYWN0aXZlUGxheWVycy5sZW5ndGggPD0gMSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIFxuICAvLyDqsozsnoQg7Iuc7J6RIOydtO2bhCDqsIEg7ZSM66CI7J207Ja067OEIOuniOyngOuniSDrsqDtjIUg6rCA7KC47Jik6riwXG4gIGNvbnN0IHBsYXllckxhc3RCZXRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gIFxuICBmb3IgKGNvbnN0IHBsYXllciBvZiBhY3RpdmVQbGF5ZXJzKSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdnYW1lX2FjdGlvbnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2dhbWVfaWQnLCBnYW1lSWQpXG4gICAgICAuZXEoJ3BsYXllcl9pZCcsIHBsYXllci5pZClcbiAgICAgIC5pbignYWN0aW9uX3R5cGUnLCBbJ2JldCcsICdjYWxsJywgJ3JhaXNlJywgJ2hhbGYnLCAnY2hlY2snXSlcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgLmxpbWl0KDEpO1xuICAgICAgXG4gICAgaWYgKGVycm9yIHx8ICFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIOuNsOydtO2EsOqwgCDsl4bsnLzrqbQg7JWE7KeBIOydvOy5mO2VmOyngCDslYrsnYxcbiAgICB9XG4gICAgXG4gICAgcGxheWVyTGFzdEJldHNbcGxheWVyLmlkXSA9IGRhdGFbMF0uYW1vdW50IHx8IDA7XG4gIH1cbiAgXG4gIC8vIOuyoO2MheyVoeydtCDrqqjrkZAg6rCZ7J2A7KeAIO2ZleyduFxuICBjb25zdCBiZXRBbW91bnRzID0gT2JqZWN0LnZhbHVlcyhwbGF5ZXJMYXN0QmV0cyk7XG4gIHJldHVybiBiZXRBbW91bnRzLmV2ZXJ5KGFtb3VudCA9PiBhbW91bnQgPT09IGJldEFtb3VudHNbMF0pO1xufVxuXG4vLyDri6TsnYwg7ZSM66CI7J207Ja0IO2EtCDqsIDsoLjsmKTquLBcbmZ1bmN0aW9uIGdldE5leHRQbGF5ZXJUdXJuKHBsYXllcnM6IFBsYXllcltdLCBjdXJyZW50UGxheWVySWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGFjdGl2ZVBsYXllcnMgPSBwbGF5ZXJzLmZpbHRlcihwID0+ICFwLmlzRGllKTtcbiAgaWYgKGFjdGl2ZVBsYXllcnMubGVuZ3RoIDw9IDEpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgXG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IGFjdGl2ZVBsYXllcnMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gY3VycmVudFBsYXllcklkKTtcbiAgY29uc3QgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgYWN0aXZlUGxheWVycy5sZW5ndGg7XG4gIHJldHVybiBhY3RpdmVQbGF5ZXJzW25leHRJbmRleF0uaWQ7XG59XG5cbi8qKlxuICog66mU7Iuc7KeAIOyghOyGoVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3NhZ2UoZ2FtZUlkOiBzdHJpbmcsIHBsYXllcklkOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIWNvbnRlbnQudHJpbSgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCfrqZTsi5zsp4Ag64K07Jqp7J20IOu5hOyWtOyeiOyKteuLiOuLpC4nKTtcbiAgfVxuICBcbiAgLy8g7ZSM66CI7J207Ja0IOygleuztCDqsIDsoLjsmKTquLBcbiAgY29uc3QgeyBkYXRhOiBwbGF5ZXJEYXRhLCBlcnJvcjogcGxheWVyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3BsYXllcnMnKVxuICAgIC5zZWxlY3QoJ3VzZXJuYW1lLCB1c2VyX2lkJylcbiAgICAuZXEoJ2lkJywgcGxheWVySWQpXG4gICAgLnNpbmdsZSgpO1xuICBcbiAgaWYgKHBsYXllckVycm9yIHx8ICFwbGF5ZXJEYXRhKSB7XG4gICAgY29uc29sZS5lcnJvcign7ZSM66CI7J207Ja0IOygleuztCDsobDtmowg7Jik66WYOicsIHBsYXllckVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+2UjOugiOydtOyWtCDsoJXrs7Trpbwg7LC+7J2EIOyImCDsl4bsirXri4jri6QuJyk7XG4gIH1cblxuICAvLyDrqZTsi5zsp4AgSUQg7IOd7ISxXG4gIGNvbnN0IG1lc3NhZ2VJZCA9IHV1aWR2NCgpO1xuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gIFxuICAvLyDrqZTsi5zsp4Ag6rCd7LK0IOyDneyEsVxuICBjb25zdCBtZXNzYWdlRGF0YSA9IHtcbiAgICBpZDogbWVzc2FnZUlkLFxuICAgIGdhbWVfaWQ6IGdhbWVJZCxcbiAgICB1c2VyX2lkOiBwbGF5ZXJEYXRhLnVzZXJfaWQsXG4gICAgdXNlcm5hbWU6IHBsYXllckRhdGEudXNlcm5hbWUsXG4gICAgY29udGVudDogY29udGVudCxcbiAgICBjcmVhdGVkX2F0OiB0aW1lc3RhbXBcbiAgfTtcbiAgXG4gIC8vIOuplOyLnOyngCDsoIDsnqVcbiAgY29uc3QgeyBlcnJvcjogbWVzc2FnZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdtZXNzYWdlcycpXG4gICAgLmluc2VydChtZXNzYWdlRGF0YSk7XG4gIFxuICBpZiAobWVzc2FnZUVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign66mU7Iuc7KeAIOyggOyepSDsmKTrpZg6JywgbWVzc2FnZUVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+uplOyLnOyngOulvCDsoITshqHtlaAg7IiYIOyXhuyKteuLiOuLpDogJyArIG1lc3NhZ2VFcnJvci5tZXNzYWdlKTtcbiAgfVxufVxuXG4vKipcbiAqIOqyjOyehCDslaHshZgg6riw66GdXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJlY29yZEdhbWVBY3Rpb24oXG4gIGdhbWVJZDogc3RyaW5nLFxuICBhY3Rpb25UeXBlOiBCZXRBY3Rpb25UeXBlIHwgJ3Nob3cnIHwgJ3N0YXJ0JyB8ICdyZWdhbWUnLFxuICBwbGF5ZXJJZDogc3RyaW5nIHwgbnVsbCxcbiAgYW1vdW50PzogbnVtYmVyXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ2FtZV9hY3Rpb25zJylcbiAgICAuaW5zZXJ0KHtcbiAgICAgIGdhbWVfaWQ6IGdhbWVJZCxcbiAgICAgIHBsYXllcl9pZDogcGxheWVySWQsXG4gICAgICBhY3Rpb25fdHlwZTogYWN0aW9uVHlwZSxcbiAgICAgIGFtb3VudDogYW1vdW50XG4gICAgfSk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign6rKM7J6EIOyVoeyFmCDquLDroZ0g7Jik66WYOicsIGVycm9yKTtcbiAgICAvLyDslaHshZgg6riw66GdIOyLpO2MqOuKlCDqsozsnoQg7KeE7ZaJ7JeQIOy5mOuqheyggeydtOyngCDslYrsnLzrr4DroZwg7Jik66WY66W8IOuNmOyngOyngCDslYrsnYxcbiAgICBjb25zb2xlLndhcm4oJ+qyjOyehCDslaHshZjsnYQg6riw66Gd7ZWgIOyImCDsl4bsirXri4jri6QuJyk7XG4gIH1cbn1cblxuLyoqXG4gKiDshZTtlIzrkJwg7Lm065OcIOuNsSDsg53shLFcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU2h1ZmZsZWREZWNrKCk6IG51bWJlcltdIHtcbiAgLy8gMeu2gO2EsCAyMOq5jOyngOydmCDsubTrk5wg7IOd7ISxICjshK/ri6Qg7Lm065OcKVxuICBjb25zdCBkZWNrID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKF8sIGkpID0+IGkgKyAxKTtcbiAgXG4gIC8vIOuNsSDshZTtlIwgKEZpc2hlci1ZYXRlcyDslYzqs6DrpqzsppgpXG4gIGZvciAobGV0IGkgPSBkZWNrLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgW2RlY2tbaV0sIGRlY2tbal1dID0gW2RlY2tbal0sIGRlY2tbaV1dO1xuICB9XG4gIFxuICByZXR1cm4gZGVjaztcbn1cblxuLyoqXG4gKiDrqqjrk6Ag7ZSM66CI7J207Ja06rCAIO2EtOydhCDqsIDsoYzripTsp4Ag7ZmV7J24XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQWxsUGxheWVyc0hhZFR1cm4oZ2FtZUlkOiBzdHJpbmcsIHBsYXllcnM6IFBsYXllcltdKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IGFjdGl2ZVBsYXllcnMgPSBwbGF5ZXJzLmZpbHRlcihwID0+ICFwLmlzRGllKTtcbiAgXG4gIC8vIOqyjOyehCDsi5zsnpEg7J207ZuEIOqwgSDtlIzroIjsnbTslrTrs4Qg6rCA7J6lIOy1nOq3vCDslaHshZgg7ZmV7J24XG4gIGNvbnN0IHBsYXllckxhc3RBY3Rpb25zID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIFxuICAvLyDqsozsnoTsnZgg66eI7KeA66eJIOudvOyatOuTnCDsi5zsnpEg7Iuc6rCEIOywvuq4sCAoc3RhcnQg7JWh7IWYIOuYkOuKlCDqsIDsnqUg7Jik656Y65CcIOuyoO2MhSDslaHshZgpXG4gIGNvbnN0IHsgZGF0YTogc3RhcnRBY3Rpb24sIGVycm9yOiBzdGFydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdnYW1lX2FjdGlvbnMnKVxuICAgIC5zZWxlY3QoJ2NyZWF0ZWRfYXQnKVxuICAgIC5lcSgnZ2FtZV9pZCcsIGdhbWVJZClcbiAgICAuZXEoJ2FjdGlvbl90eXBlJywgJ3N0YXJ0JylcbiAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAubGltaXQoMSk7XG4gIFxuICBpZiAoc3RhcnRFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+qyjOyehCDsi5zsnpEg7JWh7IWYIOyhsO2ajCDsmKTrpZg6Jywgc3RhcnRFcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBjb25zdCByb3VuZFN0YXJ0VGltZSA9IHN0YXJ0QWN0aW9uICYmIHN0YXJ0QWN0aW9uLmxlbmd0aCA+IDAgXG4gICAgPyBzdGFydEFjdGlvblswXS5jcmVhdGVkX2F0IFxuICAgIDogbmV3IERhdGUoMCkudG9JU09TdHJpbmcoKTtcbiAgXG4gIC8vIOqwgSDtmZzshLEg7ZSM66CI7J207Ja067OE66GcIOuniOyngOuniSDslaHshZgg7ZmV7J24XG4gIGZvciAoY29uc3QgcGxheWVyIG9mIGFjdGl2ZVBsYXllcnMpIHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2dhbWVfYWN0aW9ucycpXG4gICAgICAuc2VsZWN0KCdwbGF5ZXJfaWQnKVxuICAgICAgLmVxKCdnYW1lX2lkJywgZ2FtZUlkKVxuICAgICAgLmVxKCdwbGF5ZXJfaWQnLCBwbGF5ZXIuaWQpXG4gICAgICAuaW4oJ2FjdGlvbl90eXBlJywgWydiZXQnLCAnY2FsbCcsICdyYWlzZScsICdoYWxmJywgJ2NoZWNrJywgJ2RpZSddKVxuICAgICAgLmd0KCdjcmVhdGVkX2F0Jywgcm91bmRTdGFydFRpbWUpXG4gICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgIC5saW1pdCgxKTtcbiAgICAgIFxuICAgIGlmIChlcnJvciB8fCAhZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyDtlIzroIjsnbTslrTqsIAg7ZiE7J6sIOudvOyatOuTnOyXkOyEnCDslaHshZjsnYQg7Leo7ZWY7KeAIOyViuyVmOydjFxuICAgIH1cbiAgICBcbiAgICBwbGF5ZXJMYXN0QWN0aW9ucy5hZGQocGxheWVyLmlkKTtcbiAgfVxuICBcbiAgLy8g66qo65OgIO2ZnOyEsSDtlIzroIjsnbTslrTqsIAg7JWh7IWY7J2EIOy3qO2WiOuKlOyngCDtmZXsnbhcbiAgcmV0dXJuIHBsYXllckxhc3RBY3Rpb25zLnNpemUgPT09IGFjdGl2ZVBsYXllcnMubGVuZ3RoO1xufVxuXG4vKipcbiAqIOqyjOyehCDsooXro4wg7LKY66asXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZpbmlzaEdhbWUoZ2FtZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8g6rKM7J6EIOyDge2DnCDsobDtmoxcbiAgY29uc3QgZ2FtZVN0YXRlID0gYXdhaXQgZ2V0R2FtZVN0YXRlKGdhbWVJZCk7XG4gIFxuICAvLyDtmZzshLEg7ZSM66CI7J207Ja0ICjri6TsnbTtlZjsp4Ag7JWK7J2AIO2UjOugiOydtOyWtCDspJEg7Lm065Oc6rCAIOyeiOuKlCDtlIzroIjsnbTslrQpXG4gIGNvbnN0IGFjdGl2ZVBsYXllcnMgPSBnYW1lU3RhdGUucGxheWVyc1xuICAgIC5maWx0ZXIocCA9PiAhcC5pc0RpZSAmJiBwLmNhcmRzICYmIHAuY2FyZHMubGVuZ3RoID09PSAyKVxuICAgIC5tYXAocCA9PiAoe1xuICAgICAgaWQ6IHAuaWQsXG4gICAgICBjYXJkczogcC5jYXJkcyBhcyBudW1iZXJbXSxcbiAgICAgIGlzRGllOiBwLmlzRGllIHx8IGZhbHNlXG4gICAgfSkpO1xuICBcbiAgaWYgKGFjdGl2ZVBsYXllcnMubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc29sZS5lcnJvcign7Zmc7ISxIO2UjOugiOydtOyWtOqwgCDsl4bsirXri4jri6QnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgXG4gIC8vIOyKueyekCDqsrDsoJVcbiAgY29uc3QgeyB3aW5uZXJJZCwgaXNSZWdhbWUgfSA9IGRldGVybWluZVdpbm5lcihhY3RpdmVQbGF5ZXJzKTtcbiAgXG4gIC8vIOyerOqyveq4sCDsspjrpqxcbiAgaWYgKGlzUmVnYW1lKSB7XG4gICAgYXdhaXQgaGFuZGxlUmVnYW1lKGdhbWVJZCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIFxuICBpZiAoIXdpbm5lcklkKSB7XG4gICAgY29uc29sZS5sb2coJ+yKueyekOulvCDqsrDsoJXtlaAg7IiYIOyXhuydjCAo6rWs7IKsIOuTseydmCDtirnsiJgg7IOB7ZmpKScpO1xuICAgIHJldHVybjtcbiAgfVxuICBcbiAgLy8g7Iq57J6QIOywvuq4sFxuICBjb25zdCB3aW5uZXIgPSBnYW1lU3RhdGUucGxheWVycy5maW5kKHAgPT4gcC5pZCA9PT0gd2lubmVySWQpO1xuICBpZiAoIXdpbm5lcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+yKueyekCDsoJXrs7Trpbwg7LC+7J2EIOyImCDsl4bsnYwnKTtcbiAgICByZXR1cm47XG4gIH1cbiAgXG4gIC8vIOuVoeqwkiDqs4TsgrAg7LKY66asXG4gIGxldCB3aW5uaW5ncyA9IGdhbWVTdGF0ZS5iZXR0aW5nVmFsdWU7XG4gIGxldCBkYW5nVmFsdWVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gIFxuICAvLyDtmZzshLEg7ZSM66CI7J207Ja0IOykkSDtjKjsnpDrk6Qg7ZmV7J24XG4gIGZvciAoY29uc3QgcGxheWVyIG9mIGdhbWVTdGF0ZS5wbGF5ZXJzLmZpbHRlcihwID0+ICFwLmlzRGllICYmIHAuaWQgIT09IHdpbm5lcklkKSkge1xuICAgIC8vIOyKueyekCDtjKgg7ZmV7J24XG4gICAgY29uc3Qgd2lubmVyRXZhbCA9IGV2YWx1YXRlQ2FyZHMod2lubmVyLmNhcmRzIHx8IFtdKTtcbiAgICAvLyDtjKjsnpAg7YyoIO2ZleyduFxuICAgIGNvbnN0IGxvc2VyRXZhbCA9IGV2YWx1YXRlQ2FyZHMocGxheWVyLmNhcmRzIHx8IFtdKTtcbiAgICBcbiAgICAvLyDrlaHqsJIg6rOE7IKwIC0g7Iq57J6Q6rCAIOuVoeyeoeydtOqzoCDtjKjsnpDqsIAg65Wh7J28IOqyveyasFxuICAgIGlmICh3aW5uZXJFdmFsLnJhbmsgPT09ICfrlaHsnqHsnbQnICYmIGxvc2VyRXZhbC5yYW5rLmluY2x1ZGVzKCfrlaEnKSAmJiBcbiAgICAgICAhbG9zZXJFdmFsLnJhbmsuaW5jbHVkZXMoJ+q0keuVoScpICYmIGxvc2VyRXZhbC5yYW5rICE9PSAnMTDrlaEnKSB7XG4gICAgICBjb25zdCBkYW5nVmFsdWUgPSBjYWxjdWxhdGVEYW5nVmFsdWUobG9zZXJFdmFsLnJhbmssIGdhbWVTdGF0ZS5iZXR0aW5nVmFsdWUpO1xuICAgICAgZGFuZ1ZhbHVlc1twbGF5ZXIuaWRdID0gZGFuZ1ZhbHVlO1xuICAgICAgd2lubmluZ3MgKz0gZGFuZ1ZhbHVlO1xuICAgIH1cbiAgICBcbiAgICAvLyDslZTtlonslrTsgqzsmYAg6rSR65WhIOyymOumrFxuICAgIGlmICh3aW5uZXJFdmFsLnJhbmsgPT09ICfslZTtlonslrTsgqwnICYmIFxuICAgICAgIChsb3NlckV2YWwucmFuayA9PT0gJzEz6rSR65WhJyB8fCBsb3NlckV2YWwucmFuayA9PT0gJzE46rSR65WhJykpIHtcbiAgICAgIC8vIOq0keuVoeyXkCDrjIDtlZwg7JWU7ZaJ7Ja07IKsIOuwsOuLuSAo7J2867CY7KCB7Jy866GcIDPrsLApXG4gICAgICBjb25zdCBhbWhhZW5nVmFsdWUgPSBnYW1lU3RhdGUuYmV0dGluZ1ZhbHVlICogMztcbiAgICAgIGRhbmdWYWx1ZXNbcGxheWVyLmlkXSA9IGFtaGFlbmdWYWx1ZTtcbiAgICAgIHdpbm5pbmdzICs9IGFtaGFlbmdWYWx1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gMzjqtJHrlaHsnbQg64uk66W4IOq0keuVoeydhCDsnbTqsrzsnYQg6rK97JqwICjsg4HsnIQg6rSR65Wh7J20IO2VmOychCDqtJHrlaEg67Cw64u5KVxuICAgIGlmICh3aW5uZXJFdmFsLnJhbmsgPT09ICczOOq0keuVoScgJiYgXG4gICAgICAgKGxvc2VyRXZhbC5yYW5rID09PSAnMTPqtJHrlaEnIHx8IGxvc2VyRXZhbC5yYW5rID09PSAnMTjqtJHrlaEnKSkge1xuICAgICAgY29uc3QgZ3dhbmdEYW5nVmFsdWUgPSBnYW1lU3RhdGUuYmV0dGluZ1ZhbHVlICogMjtcbiAgICAgIGRhbmdWYWx1ZXNbcGxheWVyLmlkXSA9IGd3YW5nRGFuZ1ZhbHVlO1xuICAgICAgd2lubmluZ3MgKz0gZ3dhbmdEYW5nVmFsdWU7XG4gICAgfVxuICB9XG4gIFxuICAvLyDsirnsnpDsnZgg7J6U7JWhIOyXheuNsOydtO2KuFxuICBjb25zdCB7IGVycm9yOiB3aW5uZXJVcGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgncGxheWVycycpXG4gICAgLnVwZGF0ZSh7XG4gICAgICBiYWxhbmNlOiB3aW5uZXIuYmFsYW5jZSArIHdpbm5pbmdzXG4gICAgfSlcbiAgICAuZXEoJ2lkJywgd2lubmVySWQpO1xuICBcbiAgaWYgKHdpbm5lclVwZGF0ZUVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign7Iq57J6QIOyelOyVoSDsl4XrjbDsnbTtirgg7Jik66WYOicsIHdpbm5lclVwZGF0ZUVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+yKueyekCDsnpTslaHsnYQg7JeF642w7J207Yq47ZWgIOyImCDsl4bsirXri4jri6QuJyk7XG4gIH1cbiAgXG4gIC8vIOuVoeqwkuydtCDsnojri6TrqbQg7Yyo7J6Q65Ok7J2YIOyelOyVoSDstpTqsIAg7LCo6rCQXG4gIGZvciAoY29uc3QgW3BsYXllcklkLCBkYW5nVmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhbmdWYWx1ZXMpKSB7XG4gICAgY29uc3QgbG9zZXIgPSBnYW1lU3RhdGUucGxheWVycy5maW5kKHAgPT4gcC5pZCA9PT0gcGxheWVySWQpO1xuICAgIGlmIChsb3Nlcikge1xuICAgICAgY29uc3QgeyBlcnJvcjogbG9zZXJVcGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3BsYXllcnMnKVxuICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICBiYWxhbmNlOiBNYXRoLm1heCgwLCBsb3Nlci5iYWxhbmNlIC0gZGFuZ1ZhbHVlKSAvLyDstZzshowgMOycvOuhnCDsoJztlZxcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKCdpZCcsIHBsYXllcklkKTtcbiAgICAgIFxuICAgICAgaWYgKGxvc2VyVXBkYXRlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign7Yyo7J6QIOyelOyVoSDsl4XrjbDsnbTtirgg7Jik66WYOicsIGxvc2VyVXBkYXRlRXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgLy8g6rKM7J6EIOyDge2DnCDsl4XrjbDsnbTtirhcbiAgY29uc3QgeyBlcnJvcjogZ2FtZVVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdnYW1lcycpXG4gICAgLnVwZGF0ZSh7XG4gICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXG4gICAgICB3aW5uZXI6IHdpbm5lcklkLFxuICAgICAgc2hvd19jYXJkczogdHJ1ZSxcbiAgICAgIGRhbmdfdmFsdWVzOiBkYW5nVmFsdWVzXG4gICAgfSlcbiAgICAuZXEoJ2lkJywgZ2FtZUlkKTtcbiAgXG4gIGlmIChnYW1lVXBkYXRlRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfqsozsnoQg7KKF66OMIOyDge2DnCDsl4XrjbDsnbTtirgg7Jik66WYOicsIGdhbWVVcGRhdGVFcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCfqsozsnoTsnYQg7KKF66OM7ZWgIOyImCDsl4bsirXri4jri6QuJyk7XG4gIH1cbiAgXG4gIC8vIOqysOqzvCDslaHshZgg6riw66GdXG4gIGF3YWl0IHJlY29yZEdhbWVBY3Rpb24oZ2FtZUlkLCAnc2hvdycsIHdpbm5lcklkKTtcbn1cblxuLy8g65Wh6rCSIOqzhOyCsCDtlajsiJhcbmZ1bmN0aW9uIGNhbGN1bGF0ZURhbmdWYWx1ZShyYW5rOiBzdHJpbmcsIGJldHRpbmdWYWx1ZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgLy8g6rSR65WhIOuwsOuLuVxuICBpZiAocmFuayA9PT0gJzM46rSR65WhJykgcmV0dXJuIGJldHRpbmdWYWx1ZSAqIDEwO1xuICBpZiAocmFuayA9PT0gJzEz6rSR65WhJykgcmV0dXJuIGJldHRpbmdWYWx1ZSAqIDg7XG4gIGlmIChyYW5rID09PSAnMTjqtJHrlaEnKSByZXR1cm4gYmV0dGluZ1ZhbHVlICogNztcbiAgXG4gIC8vIOydvOuwmCDrlaEg67Cw64u5XG4gIGlmIChyYW5rID09PSAnMTDrlaEnIHx8IHJhbmsgPT09ICfsnqXrlaEnKSByZXR1cm4gYmV0dGluZ1ZhbHVlICogNTtcbiAgaWYgKHJhbmsgPT09ICc565WhJykgcmV0dXJuIGJldHRpbmdWYWx1ZSAqIDQuNTtcbiAgaWYgKHJhbmsgPT09ICc465WhJykgcmV0dXJuIGJldHRpbmdWYWx1ZSAqIDQ7XG4gIGlmIChyYW5rID09PSAnN+uVoScpIHJldHVybiBiZXR0aW5nVmFsdWUgKiAzLjU7XG4gIGlmIChyYW5rID09PSAnNuuVoScpIHJldHVybiBiZXR0aW5nVmFsdWUgKiAzO1xuICBpZiAocmFuayA9PT0gJzXrlaEnKSByZXR1cm4gYmV0dGluZ1ZhbHVlICogMi41O1xuICBpZiAocmFuayA9PT0gJzTrlaEnKSByZXR1cm4gYmV0dGluZ1ZhbHVlICogMjtcbiAgaWYgKHJhbmsgPT09ICcz65WhJykgcmV0dXJuIGJldHRpbmdWYWx1ZSAqIDEuNTtcbiAgaWYgKHJhbmsgPT09ICcy65WhJykgcmV0dXJuIGJldHRpbmdWYWx1ZSAqIDEuMjU7XG4gIGlmIChyYW5rID09PSAnMeuVoScpIHJldHVybiBiZXR0aW5nVmFsdWUgKiAxO1xuICBcbiAgLy8g7Yq57IiYIOyhsO2VqSDrsLDri7lcbiAgaWYgKHJhbmsgPT09ICfslZTtlonslrTsgqwnKSByZXR1cm4gYmV0dGluZ1ZhbHVlICogMzsgLy8g6rSR65WhIOyeoeyVmOydhCDrlYxcbiAgXG4gIHJldHVybiAwOyAvLyDrlaHsnbQg7JWE64uMIOqyveyasFxufVxuXG4vLyDsnqzqsr3quLAg7LKY66asIO2VqOyImFxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUmVnYW1lKGdhbWVJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGdhbWVTdGF0ZSA9IGF3YWl0IGdldEdhbWVTdGF0ZShnYW1lSWQpO1xuICBcbiAgLy8g7ZSM66CI7J207Ja065OkIOy5tOuTnCDstIjquLDtmZQgXG4gIGZvciAoY29uc3QgcGxheWVyIG9mIGdhbWVTdGF0ZS5wbGF5ZXJzKSB7XG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwbGF5ZXJzJylcbiAgICAgIC51cGRhdGUoeyBjYXJkczogbnVsbCwgaXNfZGllOiBmYWxzZSB9KVxuICAgICAgLmVxKCdpZCcsIHBsYXllci5pZCk7XG4gICAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+2UjOugiOydtOyWtCDsubTrk5wg7LSI6riw7ZmUIOyYpOulmDonLCBlcnJvcik7XG4gICAgfVxuICB9XG4gIFxuICAvLyDqsozsnoQg7IOB7YOcIOyXheuNsOydtO2KuCAtIOuwsO2MheqwkuydgCDsnKDsp4DtlZjrqbAg7J6s7Iuc7J6RXG4gIGNvbnN0IHsgZXJyb3I6IGdhbWVVcGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnZ2FtZXMnKVxuICAgIC51cGRhdGUoe1xuICAgICAgc3RhdHVzOiAncmVnYW1lJyxcbiAgICAgIGN1cnJlbnRfdHVybjogbnVsbCxcbiAgICAgIHdpbm5lcjogbnVsbCxcbiAgICAgIHJlZ2FtZV9zdGFydF90aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICByZWdhbWVfd2FpdF90aW1lOiBSRUdBTUVfV0FJVF9USU1FX01TXG4gICAgfSlcbiAgICAuZXEoJ2lkJywgZ2FtZUlkKTtcbiAgXG4gIGlmIChnYW1lVXBkYXRlRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfsnqzqsr3quLAg7ISk7KCVIOyYpOulmDonLCBnYW1lVXBkYXRlRXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcign7J6s6rK96riw66W8IOyEpOygle2VoCDsiJgg7JeG7Iq164uI64ukLicpO1xuICB9XG4gIFxuICAvLyDsnqzqsr3quLAg7JWh7IWYIOq4sOuhnVxuICBhd2FpdCByZWNvcmRHYW1lQWN0aW9uKGdhbWVJZCwgJ3JlZ2FtZScsIG51bGwpO1xuICBcbiAgLy8gMey0iOuniOuLpCDrjIDquLAg7Iuc6rCEIOyXheuNsOydtO2KuFxuICBsZXQgcmVtYWluaW5nVGltZSA9IE1hdGguZmxvb3IoUkVHQU1FX1dBSVRfVElNRV9NUyAvIDEwMDApO1xuICBcbiAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICByZW1haW5pbmdUaW1lLS07XG4gICAgXG4gICAgLy8g64Ko7J2AIOyLnOqwhCDsl4XrjbDsnbTtirhcbiAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2dhbWVzJylcbiAgICAgIC51cGRhdGUoeyByZWdhbWVfcmVtYWluaW5nX3RpbWU6IHJlbWFpbmluZ1RpbWUgfSlcbiAgICAgIC5lcSgnaWQnLCBnYW1lSWQpO1xuICAgICAgXG4gICAgaWYgKHJlbWFpbmluZ1RpbWUgPD0gMCkge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICB9XG4gIH0sIDEwMDApO1xuICBcbiAgLy8g7J6g7IucIO2bhCDqsozsnoQg7J6s7Iuc7J6RXG4gIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpOyAvLyDtmLnsi5wg64Ko7JWE7J6I64qUIOyduO2EsOuyjCDsoJXrpqxcbiAgICAgIGF3YWl0IHN0YXJ0R2FtZShnYW1lSWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcign7J6s6rK96riwIOyLnOyekSDsmKTrpZg6JywgZXJyKTtcbiAgICB9XG4gIH0sIFJFR0FNRV9XQUlUX1RJTUVfTVMpO1xufVxuXG4vLyDtlIzroIjsnbTslrQg7KKM7ISdIOyXheuNsOydtO2KuFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNlYXQoZ2FtZUlkOiBzdHJpbmcsIHBsYXllcklkOiBzdHJpbmcsIHNlYXRJbmRleDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgLy8g7ZW064u5IOyijOyEneydtCDsnbTrr7gg7IKs7JqpIOykkeyduOyngCDtmZXsnbhcbiAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nUGxheWVyLCBlcnJvcjogY2hlY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwbGF5ZXJzJylcbiAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgIC5lcSgnZ2FtZV9pZCcsIGdhbWVJZClcbiAgICAgIC5lcSgnc2VhdF9pbmRleCcsIHNlYXRJbmRleCk7XG5cbiAgICBpZiAoY2hlY2tFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign7KKM7ISdIO2ZleyduCDsmKTrpZg6JywgY2hlY2tFcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yijOyEnSDsoJXrs7Trpbwg7ZmV7J247ZWgIOyImCDsl4bsirXri4jri6QuJyk7XG4gICAgfVxuXG4gICAgLy8g7J2066+4IOuLpOuluCDtlIzroIjsnbTslrTqsIAg7ZW064u5IOyijOyEneyXkCDslYnslYTsnojsnLzrqbQg7Jik66WYXG4gICAgaWYgKGV4aXN0aW5nUGxheWVyICYmIGV4aXN0aW5nUGxheWVyLmxlbmd0aCA+IDAgJiYgZXhpc3RpbmdQbGF5ZXJbMF0uaWQgIT09IHBsYXllcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ydtOuvuCDri6Trpbgg7ZSM66CI7J207Ja06rCAIOyCrOyaqSDspJHsnbgg7KKM7ISd7J6F64uI64ukLicpO1xuICAgIH1cblxuICAgIC8vIO2UjOugiOydtOyWtCDsoozshJ0g7JeF642w7J207Yq4XG4gICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGxheWVycycpXG4gICAgICAudXBkYXRlKHsgc2VhdF9pbmRleDogc2VhdEluZGV4IH0pXG4gICAgICAuZXEoJ2dhbWVfaWQnLCBnYW1lSWQpXG4gICAgICAuZXEoJ2lkJywgcGxheWVySWQpO1xuXG4gICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfsoozshJ0g7JeF642w7J207Yq4IOyYpOulmDonLCB1cGRhdGVFcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ+yijOyEneydhCDsl4XrjbDsnbTtirjtlaAg7IiYIOyXhuyKteuLiOuLpDogJyArIHVwZGF0ZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcign7KKM7ISdIOyXheuNsOydtO2KuCDspJEg7JiI7Jm4IOuwnOyDnTonLCBlcnIpO1xuICAgIHRocm93IGVycjtcbiAgfVxufSAiXSwibmFtZXMiOlsic3VwYWJhc2UiLCJ2NCIsInV1aWR2NCIsImRldGVybWluZVdpbm5lciIsImV2YWx1YXRlQ2FyZHMiLCJSRUdBTUVfV0FJVF9USU1FX01TIiwiY3JlYXRlR2FtZSIsInVzZXJuYW1lIiwiZ2FtZUlkIiwicGxheWVySWQiLCJ1c2VySWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJkYXRhIiwiZ2FtZURhdGEiLCJlcnJvciIsImdhbWVFcnJvciIsImZyb20iLCJpbnNlcnQiLCJpZCIsInN0YXR1cyIsImN1cnJlbnRfdHVybiIsImJldHRpbmdfdmFsdWUiLCJ3aW5uZXIiLCJzZWxlY3QiLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIiwibG9nIiwiZXJyIiwiam9pbkdhbWUiLCJzZWF0SW5kZXgiLCJlcSIsInNpbmdsZSIsInN0b3JlZFVzZXJJZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzdG9yZWRQbGF5ZXJJZCIsImV4aXN0aW5nUGxheWVyIiwiZXhpc3RpbmdQbGF5ZXJFcnJvciIsInVwZGF0ZSIsImdhbWVTdGF0ZSIsImdldEdhbWVTdGF0ZSIsInJlam9pbmVkIiwicGxheWVyRGF0YSIsInBsYXllckVycm9yIiwiZ2FtZV9pZCIsInVzZXJfaWQiLCJiYWxhbmNlIiwiaXNfZGllIiwic2VhdF9pbmRleCIsInNldEl0ZW0iLCJwbGF5ZXJzRGF0YSIsInBsYXllcnNFcnJvciIsInJlZ2FtZVJlbWFpbmluZ1RpbWUiLCJ1bmRlZmluZWQiLCJyZWdhbWVfc3RhcnRfdGltZSIsInJlZ2FtZV93YWl0X3RpbWUiLCJzdGFydFRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsImN1cnJlbnRUaW1lIiwiZWxhcHNlZE1zIiwicmVtYWluaW5nTXMiLCJtYXgiLCJjZWlsIiwicGxheWVycyIsIm1hcCIsInBsYXllciIsImNhcmRzIiwiaXNEaWUiLCJjdXJyZW50VHVybiIsImJldHRpbmdWYWx1ZSIsInJlZ2FtZV9yZW1haW5pbmdfdGltZSIsInN0YXJ0R2FtZSIsImxlbmd0aCIsImRlY2siLCJjcmVhdGVTaHVmZmxlZERlY2siLCJpIiwicGxheWVyQ2FyZHMiLCJwb3AiLCJmaWx0ZXIiLCJCb29sZWFuIiwidXBkYXRlRXJyb3IiLCJmaXJzdFR1cm4iLCJmbG9vciIsInJlY29yZEdhbWVBY3Rpb24iLCJwbGFjZUJldCIsImFjdGlvblR5cGUiLCJhbW91bnQiLCJmaW5kIiwicCIsImFjdGlvbnNEYXRhIiwiYWN0aW9uc0Vycm9yIiwib3JkZXIiLCJhc2NlbmRpbmciLCJsaW1pdCIsImxhc3RCZXRBY3Rpb24iLCJhY3Rpb24iLCJpbmNsdWRlcyIsImFjdGlvbl90eXBlIiwicGxheWVyX2lkIiwiYmV0QW1vdW50IiwiYmFzZUJldCIsIm1pbkJldCIsInBsYXllclVwZGF0ZUVycm9yIiwiYWN0aXZlUGxheWVycyIsIndpbm5lclVwZGF0ZUVycm9yIiwiZ2FtZVVwZGF0ZUVycm9yIiwibmV4dFBsYXllclR1cm5JZCIsImdldE5leHRQbGF5ZXJUdXJuIiwiYWxsUGxheWVyc1Rvb2tBY3Rpb24iLCJjaGVja0FsbFBsYXllcnNIYWRUdXJuIiwiYWxsUGxheWVyc01hdGNoZWRCZXQiLCJjaGVja0FsbFBsYXllcnNNYXRjaGVkQmV0IiwiZmluaXNoR2FtZSIsInBsYXllckxhc3RCZXRzIiwiaW4iLCJiZXRBbW91bnRzIiwiT2JqZWN0IiwidmFsdWVzIiwiZXZlcnkiLCJjdXJyZW50UGxheWVySWQiLCJjdXJyZW50SW5kZXgiLCJmaW5kSW5kZXgiLCJuZXh0SW5kZXgiLCJzZW5kTWVzc2FnZSIsImNvbnRlbnQiLCJ0cmltIiwibWVzc2FnZUlkIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJtZXNzYWdlRGF0YSIsImNyZWF0ZWRfYXQiLCJtZXNzYWdlRXJyb3IiLCJ3YXJuIiwiQXJyYXkiLCJfIiwiaiIsInBsYXllckxhc3RBY3Rpb25zIiwiU2V0Iiwic3RhcnRBY3Rpb24iLCJzdGFydEVycm9yIiwicm91bmRTdGFydFRpbWUiLCJndCIsImFkZCIsInNpemUiLCJ3aW5uZXJJZCIsImlzUmVnYW1lIiwiaGFuZGxlUmVnYW1lIiwid2lubmluZ3MiLCJkYW5nVmFsdWVzIiwid2lubmVyRXZhbCIsImxvc2VyRXZhbCIsInJhbmsiLCJkYW5nVmFsdWUiLCJjYWxjdWxhdGVEYW5nVmFsdWUiLCJhbWhhZW5nVmFsdWUiLCJnd2FuZ0RhbmdWYWx1ZSIsImVudHJpZXMiLCJsb3NlciIsImxvc2VyVXBkYXRlRXJyb3IiLCJzaG93X2NhcmRzIiwiZGFuZ192YWx1ZXMiLCJyZW1haW5pbmdUaW1lIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInNldFRpbWVvdXQiLCJ1cGRhdGVTZWF0IiwiY2hlY2tFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/gameApi.ts\n"));

/***/ })

});