exports.id=969,exports.ids=[969],exports.modules={5672:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},7520:()=>{},5100:(e,r,t)=>{"use strict";t.d(r,{Cb:()=>d,Op:()=>u,bG:()=>m,dz:()=>n,ky:()=>c,nY:()=>s,t:()=>o,u1:()=>l});var a=t(2777),i=t(481);async function n(){let{data:e,error:r}=await a.O.from("games").insert({status:"waiting",betting_value:0,current_turn:null}).select("id").single();if(r)throw console.error("게임 생성 오류:",r),r;return e.id}async function s(e,r,t){let{data:i}=await a.O.from("players").select("id").eq("game_id",e).eq("user_id",r).single();if(i){console.log("이미 게임에 참가 중입니다.");return}let{error:n}=await a.O.from("players").insert({game_id:e,user_id:r,username:t,cards:[],is_die:!1,balance:1e4});if(n)throw console.error("게임 참가 오류:",n),n;await a.O.from("game_actions").insert({game_id:e,player_id:r,action_type:"join",amount:0})}async function o(e){let{data:r,error:t}=await a.O.from("players").select("id, user_id").eq("game_id",e);if(t||!r||r.length<2)throw console.error("게임 시작 오류: 참가자가 부족합니다."),Error("게임을 시작하려면 최소 2명의 플레이어가 필요합니다.");let n=(0,i._7)();for(let e of r.map((e,r)=>{let t=[n[2*r],n[2*r+1]];return{id:e.id,cards:t}}))await a.O.from("players").update({cards:e.cards}).eq("id",e.id);await a.O.from("games").update({status:"playing",current_turn:r[0].user_id,betting_value:0}).eq("id",e)}async function l(e,r,t){let{data:n,error:s}=await a.O.from("games").select("current_turn, betting_value").eq("id",e).single();if(s||!n)throw console.error("베팅 오류: 게임을 찾을 수 없습니다."),Error("게임을 찾을 수 없습니다.");if(n.current_turn!==r)throw Error("당신의 차례가 아닙니다.");let{data:o,error:l}=await a.O.from("players").select("balance, is_die").eq("game_id",e).eq("user_id",r).single();if(l||!o)throw console.error("베팅 오류: 플레이어를 찾을 수 없습니다."),Error("플레이어를 찾을 수 없습니다.");if(o.is_die)throw Error("이미 다이 상태입니다.");if(o.balance<t)throw Error("잔액이 부족합니다.");await a.O.from("players").update({balance:o.balance-t}).eq("game_id",e).eq("user_id",r),await a.O.from("game_actions").insert({game_id:e,player_id:r,action_type:"bet",amount:t});let d=n.betting_value+t,{data:u,error:c}=await a.O.from("players").select("user_id, is_die").eq("game_id",e);if(c||!u)throw console.error("베팅 오류: 플레이어 목록을 가져올 수 없습니다."),Error("플레이어 목록을 가져올 수 없습니다.");let m=(0,i.el)(r,u.map(e=>({id:e.user_id,isDie:e.is_die})));await a.O.from("games").update({betting_value:d,current_turn:m}).eq("id",e)}async function d(e,r){let{data:t,error:n}=await a.O.from("games").select("current_turn, betting_value").eq("id",e).single();if(n||!t)throw console.error("콜 오류: 게임을 찾을 수 없습니다."),Error("게임을 찾을 수 없습니다.");if(t.current_turn!==r)throw Error("당신의 차례가 아닙니다.");let{data:s,error:o}=await a.O.from("game_actions").select("amount").eq("game_id",e).eq("action_type","bet").order("created_at",{ascending:!1}).limit(1).single();if(o||!s)throw console.error("콜 오류: 마지막 베팅 정보를 찾을 수 없습니다."),Error("마지막 베팅 정보를 찾을 수 없습니다.");let l=s.amount,{data:d,error:u}=await a.O.from("players").select("balance, is_die").eq("game_id",e).eq("user_id",r).single();if(u||!d)throw console.error("콜 오류: 플레이어를 찾을 수 없습니다."),Error("플레이어를 찾을 수 없습니다.");if(d.is_die)throw Error("이미 다이 상태입니다.");if(d.balance<l)throw Error("잔액이 부족합니다.");await a.O.from("players").update({balance:d.balance-l}).eq("game_id",e).eq("user_id",r),await a.O.from("game_actions").insert({game_id:e,player_id:r,action_type:"call",amount:l});let c=t.betting_value+l,{data:m,error:f}=await a.O.from("players").select("user_id, is_die, cards").eq("game_id",e);if(f||!m)throw console.error("콜 오류: 플레이어 목록을 가져올 수 없습니다."),Error("플레이어 목록을 가져올 수 없습니다.");let{data:_,error:g}=await a.O.from("game_actions").select("player_id").eq("game_id",e).eq("action_type","call").order("created_at",{ascending:!1});if(g)throw console.error("콜 오류: 콜 횟수를 확인할 수 없습니다."),Error("콜 횟수를 확인할 수 없습니다.");let w=m.filter(e=>!e.is_die);if(_&&_.length>=w.length-1){let r=(0,i.M2)(m.map(e=>({id:e.user_id,cards:e.cards,isDie:e.is_die})));if(r){let{data:t,error:i}=await a.O.from("players").select("balance").eq("game_id",e).eq("user_id",r).single();!i&&t&&await a.O.from("players").update({balance:t.balance+c}).eq("game_id",e).eq("user_id",r),await a.O.from("games").update({status:"finished",winner:r,betting_value:0}).eq("id",e)}}else{let t=(0,i.el)(r,m.map(e=>({id:e.user_id,isDie:e.is_die})));await a.O.from("games").update({betting_value:c,current_turn:t}).eq("id",e)}}async function u(e,r){let{data:t,error:n}=await a.O.from("games").select("current_turn, status").eq("id",e).single();if(n||!t)throw console.error("다이 오류: 게임을 찾을 수 없습니다."),Error("게임을 찾을 수 없습니다.");if(t.current_turn!==r)throw Error("당신의 차례가 아닙니다.");if("playing"!==t.status)throw Error("게임이 진행 중이 아닙니다.");await a.O.from("players").update({is_die:!0}).eq("game_id",e).eq("user_id",r),await a.O.from("game_actions").insert({game_id:e,player_id:r,action_type:"die",amount:0});let{data:s,error:o}=await a.O.from("players").select("user_id, is_die, cards").eq("game_id",e);if(o||!s)throw console.error("다이 오류: 플레이어 목록을 가져올 수 없습니다."),Error("플레이어 목록을 가져올 수 없습니다.");let l=s.filter(e=>!e.is_die);if(1===l.length){let r=l[0].user_id,{data:t,error:i}=await a.O.from("players").select("balance").eq("game_id",e).eq("user_id",r).single();if(!i&&t){let{data:i,error:n}=await a.O.from("games").select("betting_value").eq("id",e).single();!n&&i&&(await a.O.from("players").update({balance:t.balance+i.betting_value}).eq("game_id",e).eq("user_id",r),await a.O.from("games").update({status:"finished",winner:r,betting_value:0}).eq("id",e))}}else{let t=(0,i.el)(r,s.map(e=>({id:e.user_id,isDie:e.is_die})));await a.O.from("games").update({current_turn:t}).eq("id",e)}}async function c(e){let{data:r,error:t}=await a.O.from("games").select("*").eq("id",e).single();if(t||!r)throw console.error("게임 상태 조회 오류:",t),Error("게임을 찾을 수 없습니다.");let{data:i,error:n}=await a.O.from("players").select("*").eq("game_id",e);if(n)throw console.error("플레이어 정보 조회 오류:",n),Error("플레이어 정보를 가져올 수 없습니다.");return{id:r.id,status:r.status,currentTurn:r.current_turn,bettingValue:r.betting_value,winner:r.winner,players:i.map(e=>({id:e.user_id,username:e.username,cards:e.cards,isDie:e.is_die,balance:e.balance}))}}async function m(e,r,t,i){let{error:n}=await a.O.from("messages").insert({game_id:e,user_id:r,username:t,content:i});if(n)throw console.error("메시지 전송 오류:",n),n}},2777:(e,r,t)=>{"use strict";t.d(r,{O:()=>a});let a=(0,t(5815).eI)("https://ftzxcbarjntphlwmincc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ0enhjYmFyam50cGhsd21pbmNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIzNzk5OTAsImV4cCI6MjA1Nzk1NTk5MH0.h8y5X3kCGJgvVf-_EA4jOyjU-4Z5q24GHklQZgrocY4")},481:(e,r,t)=>{"use strict";t.d(r,{M2:()=>d,_7:()=>s,el:()=>l,g9:()=>i,gr:()=>n,z0:()=>o});let a=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20];function i(e){return Math.ceil(e/2)}function n(e){return 1===e||3===e||8===e}function s(){let e=[...a];for(let r=e.length-1;r>0;r--){let t=Math.floor(Math.random()*(r+1));[e[r],e[t]]=[e[t],e[r]]}return e}function o(e){if(2!==e.length)throw Error("카드는 정확히 2장이어야 합니다");let[r,t]=e,a=i(r),n=i(t);if(1===r&&3===t)return{cards:e,rank:"광땡",value:1e3};if(1===r&&8===t)return{cards:e,rank:"광땡",value:999};if(1===t&&3===r)return{cards:e,rank:"광땡",value:1e3};if(1===t&&8===r)return{cards:e,rank:"광땡",value:999};if(a===n)return{cards:e,rank:"땡",value:900+10*a};if(1===a&&2===n||2===a&&1===n)return{cards:e,rank:"알리",value:800};if(1===a&&4===n||4===a&&1===n)return{cards:e,rank:"독사",value:700};if(1===a&&9===n||9===a&&1===n)return{cards:e,rank:"구삥",value:600};if(1===a&&10===n||10===a&&1===n)return{cards:e,rank:"장삥",value:500};if(4===a&&10===n||10===a&&4===n)return{cards:e,rank:"장사",value:400};if(4===a&&6===n||6===a&&4===n)return{cards:e,rank:"세륙",value:300};let s=(a+n)%10;return 0===s?{cards:e,rank:"망통",value:0}:{cards:e,rank:"끗",value:s}}function l(e,r){let t=r.filter(e=>!e.isDie);if(t.length<=1)return t[0]?.id||e;let a=(t.findIndex(r=>r.id===e)+1)%t.length;return t[a].id}function d(e){let r=e.filter(e=>!e.isDie);if(0===r.length)return null;if(1===r.length)return r[0].id;let t=r[0].id,a=r[0].cards;for(let e=1;e<r.length;e++)2===function(e,r){let t=o(e),a=o(r);return t.value>a.value?1:t.value<a.value?2:0}(a,r[e].cards)&&(t=r[e].id,a=r[e].cards);return t}},2029:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n,metadata:()=>i});var a=t(9510);t(5023);let i={title:"한국식 포커 - 섯다",description:"전통적인 한국식 포커 게임인 섯다를 온라인에서 즐겨보세요!"};function n({children:e}){return a.jsx("html",{lang:"ko",children:a.jsx("body",{children:a.jsx("main",{children:e})})})}},5023:()=>{}};